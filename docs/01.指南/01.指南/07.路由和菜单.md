---
title: è·¯ç”±å’Œèœå•
article: false
date: 2022-12-07
permalink: /pages/routerMenu/
---

è·¯ç”±å’Œèœå•æ˜¯æä¸ºé‡è¦çš„ï¼Œé…ç½®æ­£ç¡®å¾ˆå…³é”®ï¼Œå¹³å°å°½æœ€å¤§å¯èƒ½è¯¦ç»†æè¿°

## è·¯ç”±å’Œèœå•é…ç½®

::: details ç‚¹å‡»æŸ¥çœ‹å®Œæ•´è·¯ç”±å’Œèœå•é…ç½®

```Ts
interface RouteConfigsTable {
  // è·¯ç”±è·¯å¾„
  path: string;
  // è·¯ç”±åç§°ï¼ˆå¿…é¡»ä¿æŒå”¯ä¸€ï¼‰
  name: string;
  // è·¯ç”±é‡å®šå‘ï¼ˆé»˜è®¤è·³è½¬åœ°å€ï¼‰
  redirect: string;
  // è·¯ç”±å…ƒä¿¡æ¯ï¼Œé€šä¿—æ¥è¯´å°±æ˜¯è·¯ç”±ä¸Šçš„é¢å¤–ä¿¡æ¯ https://router.vuejs.org/zh/guide/advanced/meta.html#%E8%B7%AF%E7%94%B1%E5%85%83%E4%BF%A1%E6%81%AF
  meta: {
    // èœå•åç§°ï¼ˆå…¼å®¹å›½é™…åŒ–ã€éå›½é™…åŒ–ï¼Œå¦‚æœç”¨å›½é™…åŒ–çš„å†™æ³•å°±å¿…é¡»åœ¨æ ¹ç›®å½•çš„localesæ–‡ä»¶å¤¹ä¸‹å¯¹åº”æ·»åŠ ï¼‰
    title: string;
    // èœå•å›¾æ ‡
    icon: string | FunctionalComponent | IconifyIcon;
    // æ˜¯å¦åœ¨èœå•ä¸­æ˜¾ç¤º
    showLink: boolean;
    // èœå•æ’åºï¼Œå€¼è¶Šé«˜æ’çš„è¶Šåï¼ˆåªé’ˆå¯¹é¡¶çº§è·¯ç”±ï¼‰
    rank: number;
  };
  // å­è·¯ç”±é…ç½®é¡¹
  children: [
    {
      // è·¯ç”±è·¯å¾„
      path: string;
      // è·¯ç”±åç§°ï¼ˆå¿…é¡»å”¯ä¸€å¹¶ä¸”å’Œå½“å‰è·¯ç”±componentå­—æ®µå¯¹åº”çš„é¡µé¢é‡Œç”¨defineOptionsåŒ…èµ·æ¥çš„nameä¿æŒä¸€è‡´ï¼‰
      name: string;
      // è·¯ç”±é‡å®šå‘
      redirect: string;
      // æŒ‰éœ€åŠ è½½éœ€è¦å±•ç¤ºçš„é¡µé¢
      component: RouteComponent;
      // è·¯ç”±å…ƒä¿¡æ¯
      meta: {
        // èœå•åç§°ï¼ˆå…¼å®¹å›½é™…åŒ–ã€éå›½é™…åŒ–ï¼Œå¦‚æœç”¨å›½é™…åŒ–çš„å†™æ³•å°±å¿…é¡»åœ¨æ ¹ç›®å½•çš„localesæ–‡ä»¶å¤¹ä¸‹å¯¹åº”æ·»åŠ ï¼‰
        title: string;
        // èœå•å›¾æ ‡
        icon: string | FunctionalComponent | IconifyIcon;
        // èœå•åç§°å³ä¾§çš„é¢å¤–å›¾æ ‡
        extraIcon: string | FunctionalComponent | IconifyIcon;
        // æ˜¯å¦æ˜¾ç¤ºè¯¥èœå•
        showLink: boolean;
        // æ˜¯å¦æ˜¾ç¤ºçˆ¶çº§èœå•
        showParent: boolean;
        // é¡µé¢çº§åˆ«æƒé™è®¾ç½®
        roles: Array<string>;
        // æŒ‰é’®çº§åˆ«æƒé™è®¾ç½®
        auths: Array<string>;
        // æ˜¯å¦ç¼“å­˜è¯¥è·¯ç”±é¡µé¢ï¼ˆå¼€å¯åï¼Œä¼šä¿å­˜è¯¥é¡µé¢çš„æ•´ä½“çŠ¶æ€ï¼Œåˆ·æ–°åä¼šæ¸…ç©ºçŠ¶æ€ï¼‰
        keepAlive: boolean;
        // éœ€è¦å†…åµŒçš„iframeé“¾æ¥åœ°å€
        frameSrc: string;
        // å†…åµŒçš„iframeé¡µé¢æ˜¯å¦å¼€å¯é¦–æ¬¡åŠ è½½åŠ¨ç”»
        frameLoading: boolean;
        // é¡µé¢åŠ è½½åŠ¨ç”»ï¼ˆä¸¤ç§æ¨¡å¼ï¼Œç¬¬äºŒç§æƒé‡æ›´é«˜ï¼Œç¬¬ä¸€ç§ç›´æ¥é‡‡ç”¨vueå†…ç½®çš„transitionsåŠ¨ç”»ï¼Œç¬¬äºŒç§æ˜¯ä½¿ç”¨animate.cssç¼–å†™è¿›ã€ç¦»åœºåŠ¨ç”»ï¼Œå¹³å°æ›´æ¨èä½¿ç”¨ç¬¬äºŒç§æ¨¡å¼ï¼Œå·²ç»å†…ç½®äº†animate.cssï¼Œç›´æ¥å†™å¯¹åº”çš„åŠ¨ç”»åå³å¯ï¼‰
        transition: {
          // å½“å‰é¡µé¢åŠ¨ç”»ï¼Œè¿™é‡Œæ˜¯ç¬¬ä¸€ç§æ¨¡å¼ï¼Œæ¯”å¦‚ name: "fade" æ›´å…·ä½“çœ‹åé¢é“¾æ¥ https://cn.vuejs.org/api/built-in-components.html#transition
          name: string;
          // å½“å‰é¡µé¢è¿›åœºåŠ¨ç”»ï¼Œè¿™é‡Œæ˜¯ç¬¬äºŒç§æ¨¡å¼ï¼Œæ¯”å¦‚ enterTransition: "animate__fadeInLeft"
          enterTransition: string;
          // å½“å‰é¡µé¢ç¦»åœºåŠ¨ç”»ï¼Œè¿™é‡Œæ˜¯ç¬¬äºŒç§æ¨¡å¼ï¼Œæ¯”å¦‚ leaveTransition: "animate__fadeOutRight"
          leaveTransition: string;
        };
        // å½“å‰èœå•åç§°æˆ–è‡ªå®šä¹‰ä¿¡æ¯ç¦æ­¢æ·»åŠ åˆ°æ ‡ç­¾é¡µ
        hiddenTag: boolean;
        // æ˜¾ç¤ºåœ¨æ ‡ç­¾é¡µçš„æœ€å¤§æ•°é‡ï¼Œéœ€æ»¡è¶³åé¢çš„æ¡ä»¶ï¼šä¸æ˜¾ç¤ºåœ¨èœå•ä¸­çš„è·¯ç”±å¹¶ä¸”æ˜¯é€šè¿‡queryæˆ–paramsä¼ å‚æ¨¡å¼æ‰“å¼€çš„é¡µé¢ã€‚åœ¨å®Œæ•´ç‰ˆå…¨å±€æœdynamicLevelå³å¯æŸ¥çœ‹ä»£ç æ¼”ç¤º
        dynamicLevel: number;
        // å°†æŸä¸ªèœå•æ¿€æ´»ï¼ˆä¸»è¦ç”¨äºé€šè¿‡queryæˆ–paramsä¼ å‚çš„è·¯ç”±ï¼Œå½“å®ƒä»¬é€šè¿‡é…ç½®showLink: falseåä¸åœ¨èœå•ä¸­æ˜¾ç¤ºï¼Œå°±ä¸ä¼šæœ‰ä»»ä½•èœå•é«˜äº®ï¼Œè€Œé€šè¿‡è®¾ç½®activePathæŒ‡å®šæ¿€æ´»èœå•å³å¯è·å¾—é«˜äº®ï¼ŒactivePathä¸ºæŒ‡å®šæ¿€æ´»èœå•çš„pathï¼‰
        activePath: string;
      };
    },
  ],
};
```

:::

## é™æ€è·¯ç”±

åœ¨å‰ç«¯ä»£ç é‡Œå†™ä¸Šå›ºå®šçš„è·¯ç”±å³é™æ€è·¯ç”±ã€‚å¹³å°æ”¯æŒä»»æ„å±‚çº§èœå•æ ¼å¼ï¼Œä¸‹é¢åˆ—ä¸¾æœ€å¸¸ç”¨çš„èœå•å±‚çº§æ¨¡å¼ï¼Œæ›´æ·±å±‚çº§æŒ‰ç…§ä¸‹é¢æ ¼å¼å³å¯

:::tip é˜…è¯»å‰é¡»çŸ¥
ä¸€èˆ¬æ¥è¯´ä¸€çº§èœå•ä»£è¡¨æ— ä»»ä½•å­èœå•çš„èœå•ï¼ŒäºŒçº§èœå•ä»£è¡¨ä¸€çº§èœå•ä¸‹é¢æœ‰å­èœå•ï¼Œä¸‰çº§èœå•ä»£è¡¨äºŒçº§èœå•ä¸‹é¢æœ‰å­èœå• ä»¥æ­¤ç±»æ¨
:::

### å¦‚ä½•ç”Ÿæˆä¸€çº§èœå•

::: details

æ¯”å¦‚æˆ‘ä»¬è¦ç”Ÿæˆä¸€ä¸ªåä¸º `åŠ æ²¹` çš„èœå•

1. æ–°å»º `src/router/modules/fighting.ts` æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹ä»£ç 

`fighting.ts`

```Ts
// æœ€ç®€ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å­—æ®µå¿…é¡»æœ‰
export default {
  path: "/fighting",
  meta: {
    title: "åŠ æ²¹"
  },
  children: [
    {
      path: "/fighting/index",
      name: "Fighting",
      component: () => import("@/views/fighting/index.vue"),
      meta: {
        title: "åŠ æ²¹"
      }
    }
  ]
};
```

2. æ–°å»º `src/views/fighting/index.vue` æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹ä»£ç 

`index.vue`

```Vue
<script setup lang="ts">
defineOptions({
  // name ä½œä¸ºä¸€ç§è§„èŒƒæœ€å¥½å¿…é¡»å†™ä¸Šå¹¶ä¸”å’Œè·¯ç”±çš„nameä¿æŒä¸€è‡´
  name: "Fighting"
});
</script>

<template>
  <h1>åŠ æ²¹</h1>
</template>
```

ä¸Šé¢æ‰€å†™ä»£ç å¦‚ä¸‹å›¾æ•ˆæœ

![img](~@alias/img/router/static1.jpg)

:::

### å¦‚ä½•ç”ŸæˆäºŒçº§èœå•ï¼ˆä¸¤ç§æ¨¡å¼ï¼‰

#### ç¬¬ä¸€ç§ï¼ˆè¯¥æ¨¡å¼é’ˆå¯¹çˆ¶çº§èœå•ä¸‹åªæœ‰ä¸€ä¸ªå­èœå•çš„æƒ…å†µï¼Œåœ¨å­èœå•çš„ `meta` å±æ€§ä¸­åŠ ä¸Š `showParent: true` å³å¯ï¼‰

::: details ç‚¹å‡»æŸ¥çœ‹

```Ts
// æœ€ç®€ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å­—æ®µå¿…é¡»æœ‰
export default {
  path: "/fighting",
  meta: {
    title: "åŠ±å¿—"
  },
  children: [
    {
      path: "/fighting/index",
      name: "Fighting",
      component: () => import("@/views/fighting/index.vue"),
      meta: {
        title: "åŠ æ²¹",
        // é€šè¿‡è®¾ç½®showParentä¸ºtrueï¼Œæ˜¾ç¤ºçˆ¶çº§
        showParent: true
      }
    }
  ]
};
```

å¦‚ä¸‹å›¾æ•ˆæœ

![img](~@alias/img/router/static2.jpg)

:::

#### ç¬¬äºŒç§ï¼ˆè¯¥æ¨¡å¼é’ˆå¯¹çˆ¶çº§èœå•ä¸‹æœ‰å¤§äºæˆ–ç­‰äºä¸¤ä¸ªå­èœå•çš„æƒ…å†µï¼‰

::: details ç‚¹å‡»æŸ¥çœ‹

```Ts
// æœ€ç®€ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å­—æ®µå¿…é¡»æœ‰
export default {
  path: "/fighting",
  meta: {
    title: "åŠ±å¿—"
  },
  children: [
    {
      path: "/fighting/index",
      name: "Fighting",
      component: () => import("@/views/fighting/index.vue"),
      meta: {
        title: "åŠ æ²¹"
      }
    },
    {
      path: "/fighting/effort",
      name: "Effort",
      component: () => import("@/views/fighting/effort.vue"),
      meta: {
        title: "åŠªåŠ›"
      }
    }
  ]
};
```

å¦‚ä¸‹å›¾æ•ˆæœ

![img](~@alias/img/router/static3.jpg)

:::

### å¦‚ä½•ç”Ÿæˆä¸‰çº§èœå•ï¼ˆä¸¤ç§æ¨¡å¼ï¼‰

#### ç¬¬ä¸€ç§ï¼ˆè¯¥æ¨¡å¼é’ˆå¯¹çˆ¶çº§èœå•ä¸‹åªæœ‰ä¸€ä¸ªå­èœå•çš„æƒ…å†µï¼Œåœ¨å­èœå•çš„ `meta` å±æ€§ä¸­åŠ ä¸Š `showParent: true` å³å¯ï¼‰

::: details ç‚¹å‡»æŸ¥çœ‹

```Ts
// æœ€ç®€ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å­—æ®µå¿…é¡»æœ‰
export default {
  path: "/nested",
  meta: {
    title: "å¤šçº§èœå•"
  },
  children: [
    {
      path: "/nested/menu1",
      meta: {
        title: "èœå•1"
      },
      children: [
        {
          path: "/nested/menu1/menu1-1",
          component: () => import("@/views/nested/menu1/menu1-1/index.vue"),
          name: "Menu1-1",
          meta: {
            title: "èœå•1-1",
            // é€šè¿‡è®¾ç½®showParentä¸ºtrueï¼Œæ˜¾ç¤ºçˆ¶çº§
            showParent: true
          }
        }
      ]
    }
  ]
};
```

å¦‚ä¸‹å›¾æ•ˆæœ

![img](~@alias/img/router/static4.jpg)

:::

#### ç¬¬äºŒç§ï¼ˆè¯¥æ¨¡å¼é’ˆå¯¹çˆ¶çº§èœå•ä¸‹æœ‰å¤§äºæˆ–ç­‰äºä¸¤ä¸ªå­èœå•çš„æƒ…å†µï¼‰

::: details ç‚¹å‡»æŸ¥çœ‹

```Ts
// æœ€ç®€ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å­—æ®µå¿…é¡»æœ‰
export default {
  path: "/nested",
  meta: {
    title: "å¤šçº§èœå•"
  },
  children: [
    {
      path: "/nested/menu1",
      meta: {
        title: "èœå•1"
      },
      children: [
        {
          path: "/nested/menu1/menu1-1",
          component: () => import("@/views/nested/menu1/menu1-1/index.vue"),
          name: "Menu1-1",
          meta: {
            title: "èœå•1-1"
          }
        },
        {
          path: "/nested/menu1/menu1-2",
          component: () => import("@/views/nested/menu1/menu1-2/index.vue"),
          name: "Menu1-2",
          meta: {
            title: "èœå•1-2"
          }
        }
      ]
    }
  ]
};
```

å¦‚ä¸‹å›¾æ•ˆæœ

![img](~@alias/img/router/static5.jpg)

:::

### å¦‚ä½•ç”Ÿæˆå››çº§èœå•ï¼ˆä¸¤ç§æ¨¡å¼ï¼‰

#### ç¬¬ä¸€ç§ï¼ˆè¯¥æ¨¡å¼é’ˆå¯¹çˆ¶çº§èœå•ä¸‹åªæœ‰ä¸€ä¸ªå­èœå•çš„æƒ…å†µï¼Œåœ¨å­èœå•çš„ `meta` å±æ€§ä¸­åŠ ä¸Š `showParent: true` å³å¯ï¼‰

::: details ç‚¹å‡»æŸ¥çœ‹

```Ts
// æœ€ç®€ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å­—æ®µå¿…é¡»æœ‰
export default {
  path: "/nested",
  meta: {
    title: "å¤šçº§èœå•"
  },
  children: [
    {
      path: "/nested/menu1",
      meta: {
        title: "èœå•1"
      },
      children: [
        {
          path: "/nested/menu1/menu1-1",
          meta: {
            title: "èœå•1-1"
          },
          children: [
            {
              path: "/nested/menu1/menu1-1/menu1-1-1",
              component: () =>
                import("@/views/nested/menu1/menu1-1/menu1-1-1/index.vue"),
              name: "Menu1-1-1",
              meta: {
                title: "èœå•1-1-1",
                // é€šè¿‡è®¾ç½®showParentä¸ºtrueï¼Œæ˜¾ç¤ºçˆ¶çº§
                showParent: true
              }
            }
          ]
        }
      ]
    }
  ]
};
```

å¦‚ä¸‹å›¾æ•ˆæœ

![img](~@alias/img/router/static6.jpg)

:::

#### ç¬¬äºŒç§ï¼ˆè¯¥æ¨¡å¼é’ˆå¯¹çˆ¶çº§èœå•ä¸‹æœ‰å¤§äºæˆ–ç­‰äºä¸¤ä¸ªå­èœå•çš„æƒ…å†µï¼‰

::: details ç‚¹å‡»æŸ¥çœ‹

```Ts
// æœ€ç®€ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å­—æ®µå¿…é¡»æœ‰
export default {
  path: "/nested",
  meta: {
    title: "å¤šçº§èœå•"
  },
  children: [
    {
      path: "/nested/menu1",
      meta: {
        title: "èœå•1"
      },
      children: [
        {
          path: "/nested/menu1/menu1-1",
          meta: {
            title: "èœå•1-1"
          },
          children: [
            {
              path: "/nested/menu1/menu1-1/menu1-1-1",
              component: () =>
                import("@/views/nested/menu1/menu1-1/menu1-1-1/index.vue"),
              name: "Menu1-1-1",
              meta: {
                title: "èœå•1-1-1"
              }
            },
            {
              path: "/nested/menu1/menu1-1/menu1-1-2",
              component: () =>
                import("@/views/nested/menu1/menu1-1/menu1-1-2/index.vue"),
              name: "Menu1-1-2",
              meta: {
                title: "èœå•1-1-2"
              }
            }
          ]
        }
      ]
    }
  ]
};
```

å¦‚ä¸‹å›¾æ•ˆæœ

![img](~@alias/img/router/static7.jpg)

:::

### æ³¨æ„ç‚¹

#### å›½é™…åŒ–

åªéœ€è¦åœ¨è·¯ç”± `meta` çš„ `title` å­—æ®µä¸­ä½¿ç”¨å›½é™…åŒ–å†™æ³•å³å¯ï¼Œæ¯”å¦‚ `title: "menus.hsabnormal"`  
è¿™ä¸ª `menus.hsabnormal` å¿…é¡»åœ¨ `locales` æ–‡ä»¶å¤¹ä¸‹è¿›è¡Œé…ç½®å“¦ï¼Œå¦‚ä¸‹å›¾

![img](~@alias/img/router/static12.jpg)

#### é‡å®šå‘

å¯ä»¥çœ‹åˆ°ä¸Šé¢ç”Ÿæˆèœå•çš„è·¯ç”±é…ç½®é¡¹æˆ‘å¹¶æ²¡æœ‰åŠ ä¸Š `redirect` å±æ€§ï¼Œå½“ä½¿ç”¨ `fighting` è·¯å¾„è·³è½¬æ—¶ï¼Œå°±ä¼šè·‘åˆ° `404` é¡µé¢

<!-- <video width="320" height="240" controls>
  <source :src="$withBase('/video/redirect.mov')" type="video/mp4">
</video> -->

æ‰€ä»¥æˆ‘ä»¬æœ€å¥½åœ¨å†™é™æ€è·¯ç”±é…ç½®æ—¶å°†çˆ¶çº§åŠ ä¸Š `redirect` å±æ€§ï¼Œ`redirect` å¯ä»¥å¡«å†™æ‚¨æƒ³è¦é‡å®šå‘çš„ `path` å³å¯ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ [src/router/modules/nested.ts](https://github.com/pure-admin/vue-pure-admin/blob/main/src/router/modules/nested.ts)

#### ç±»å‹æç¤º

åˆ†ä¸¤ç§

1. `export default` åè·Ÿ `{}`ï¼Œè¿™ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§ï¼Œåœ¨è·¯ç”±çš„é…ç½®é¡¹æœ€ååŠ ä¸Š `as RouteConfigsTable` å³å¯è·å¾—ç±»å‹æç¤ºï¼Œå¦‚ä¸‹å›¾

![img](~@alias/img/router/static10.jpg)

2. `export default` åè·Ÿ `[]`ï¼Œåœ¨è·¯ç”±çš„é…ç½®é¡¹æœ€ååŠ ä¸Š `as Array<RouteConfigsTable>` å³å¯è·å¾—ç±»å‹æç¤ºï¼Œå¦‚ä¸‹å›¾

![img](~@alias/img/router/static11.jpg)

:::tip æ‚¨è‚¯å®šæƒ³é—® RouteConfigsTable æ˜¯å“ªé‡Œæ¥çš„å‘¢ï¼Ÿ
[æˆ‘åœ¨è¿™å‘¢ï¼Œå¿«å¿«ç‚¹æˆ‘æŸ¥çœ‹ ğŸ˜Š](https://github.com/pure-admin/vue-pure-admin/blob/main/types/router.d.ts#L81)
:::

#### æ·»åŠ æ—  `layout` çš„é¡µé¢

ä½¿ç”¨åœºæ™¯ï¼šéœ€è¦å¤–åµŒå¹³å°æŸä¸ªé¡µé¢ï¼Œä¸éœ€è¦å±•ç¤ºèœå•å¯¼èˆªä»¥åŠé¢å¤–æ¨¡å—ï¼Œåªéœ€è¦å±•ç¤ºä¸šåŠ¡å†…å®¹æ¨¡å—  
æ—  `layout` é¡µé¢ä¹Ÿå°±ç›¸å½“äºä¸€ä¸ªå…¨å±ç©ºç™½é¡µé¢ï¼Œæ²¡æœ‰èœå•å¯¼èˆªä»¥åŠé¢å¤–æ¨¡å—

<!-- <video width="320" height="240" controls>
  <source :src="$withBase('/video/layout.mov')" type="video/mp4">
</video> -->

å¦‚ä½•æ·»åŠ ï¼Ÿ

1. åœ¨ `src/router/modules/remaining.ts` æ–‡ä»¶æ·»åŠ å¯¹åº”è·¯ç”± [å…·ä½“å‚è€ƒ](https://github.com/pure-admin/vue-pure-admin/blob/main/src/router/modules/remaining.ts#L32-L41)

2. æ·»åŠ å¯¹åº”ä¸šåŠ¡ä»£ç é¡µé¢ [å…·ä½“å‚è€ƒ](https://github.com/pure-admin/vue-pure-admin/tree/main/src/views/empty)

:::tip æ¸©é¦¨æç¤º
å¿…é¡»åœ¨ `src/router/modules/remaining.ts` æ–‡ä»¶æ·»åŠ å“¦
:::

#### ç¦æ­¢ä¿®æ”¹æˆ–åˆ é™¤çš„è·¯ç”±

`src/router/modules` æ–‡ä»¶å¤¹é‡Œçš„ `home.ts`ã€`remaining.ts`ã€`error.ts` è¿™ä¸‰ä¸ªæ–‡ä»¶ä¸å¯ä¿®æ”¹æˆ–åˆ é™¤ï¼Œå› ä¸ºå¹³å°çš„æŸäº›æ ¸å¿ƒé€»è¾‘æ˜¯æ ¹æ®è¿™ä¸‰ä¸ªæ–‡ä»¶ä½œå¤„ç†

![img](~@alias/img/router/static8.jpg)

å¦‚æœä¸æƒ³åœ¨é¡µé¢æ˜¾ç¤ºï¼Œåœ¨é¡¶çº§è·¯ç”±çš„ `meta` å±æ€§åŠ ä¸Š `showLink: false` å³å¯ï¼Œå¦‚ä¸‹å›¾

![img](~@alias/img/router/static9.jpg)

### å¦‚ä½•åªè¦é™æ€è·¯ç”±

å¹³å°åœ¨ç™»å½•æ—¶é»˜è®¤ä¼šèµ° [getAsyncRoutes](https://github.com/pure-admin/vue-pure-admin/blob/main/src/router/utils.ts#L30) æ¥å£è¯·æ±‚åç«¯è¿”å›çš„åŠ¨æ€è·¯ç”±ï¼Œé»˜è®¤ç”¨ [mock](https://github.com/pure-admin/vue-pure-admin/blob/main/mock/asyncRoutes.ts) æ¨¡æ‹Ÿè¿”å›ï¼Œå¦‚æœåªè¦é™æ€è·¯ç”±ï¼ŒæŒ‰ç…§ä¸‹é¢ä¸¤ä¸ªæ­¥éª¤ä¿®æ”¹å³å¯

1. åœ¨ `src/views/login/index.vue` æ–‡ä»¶ä½œå¦‚ä¸‹æ”¹åŠ¨

```Vue
<script setup lang="ts">
import { setToken } from "@/utils/auth";
import { addPathMatch, getTopMenu } from "@/router/utils";
import { usePermissionStoreHook } from "@/store/modules/permission";

const onLogin = async (formEl: FormInstance | undefined) => {
  if (!formEl) return;
  await formEl.validate(valid => {
    if (valid) {
      loading.value = true;
      setToken({
        username: "admin",
        roles: ["admin"],
        accessToken: "eyJhbGciOiJIUzUxMiJ9.admin"
      } as any);
      // å…¨éƒ¨é‡‡å–é™æ€è·¯ç”±æ¨¡å¼
      usePermissionStoreHook().handleWholeMenus([]);
      addPathMatch();
      router.push(getTopMenu(true).path);
      message("ç™»å½•æˆåŠŸ", { type: "success" });
      loading.value = false;
    }
  });
};
</script>
```

![img](~@alias/img/router/static13.jpg)

2. åœ¨ `src/router/index.ts` æ–‡ä»¶ä½œå¦‚ä¸‹æ”¹åŠ¨

```ts
import { addPathMatch } from "./utils";

// ä½¿ç”¨ä¸‹é¢æ–¹æ³•æ›¿æ¢initRouter
usePermissionStoreHook().handleWholeMenus([]);
addPathMatch();
if (!useMultiTagsStoreHook().getMultiTagsCache) {
  const { path } = to;
  const route = findRouteByPath(path, router.options.routes[0].children);
  getTopMenu(true);
  // queryã€paramsæ¨¡å¼è·¯ç”±ä¼ å‚æ•°çš„æ ‡ç­¾é¡µä¸åœ¨æ­¤å¤„å¤„ç†
  if (route && route.meta?.title) {
    if (isAllEmpty(route.parentId) && route.meta?.backstage) {
      // æ­¤å¤„ä¸ºåŠ¨æ€é¡¶çº§è·¯ç”±ï¼ˆç›®å½•ï¼‰
      const { path, name, meta } = route.children[0];
      useMultiTagsStoreHook().handleTags("push", {
        path,
        name,
        meta,
      });
    } else {
      const { path, name, meta } = route;
      useMultiTagsStoreHook().handleTags("push", {
        path,
        name,
        meta,
      });
    }
  }
}
// ç¡®ä¿åŠ¨æ€è·¯ç”±å®Œå…¨åŠ å…¥è·¯ç”±åˆ—è¡¨å¹¶ä¸”ä¸å½±å“é™æ€è·¯ç”±ï¼ˆæ³¨æ„ï¼šåŠ¨æ€è·¯ç”±åˆ·æ–°æ—¶router.beforeEachå¯èƒ½ä¼šè§¦å‘ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡è§¦å‘åŠ¨æ€è·¯ç”±è¿˜æœªå®Œå…¨æ·»åŠ ï¼Œç¬¬äºŒæ¬¡åŠ¨æ€è·¯ç”±æ‰å®Œå…¨æ·»åŠ åˆ°è·¯ç”±åˆ—è¡¨ï¼Œå¦‚æœéœ€è¦åœ¨router.beforeEachåšä¸€äº›åˆ¤æ–­å¯ä»¥åœ¨to.nameå­˜åœ¨çš„æ¡ä»¶ä¸‹å»åˆ¤æ–­ï¼Œè¿™æ ·å°±åªä¼šè§¦å‘ä¸€æ¬¡ï¼‰
if (isAllEmpty(to.name)) router.push(to.fullPath);
```

![img](~@alias/img/router/static15.jpg)
![img](~@alias/img/router/static16.jpg)

## åŠ¨æ€è·¯ç”±

åç«¯è¿”å›çš„è·¯ç”±å³åŠ¨æ€è·¯ç”±ã€‚å¹³å°æ”¯æŒä»»æ„å±‚çº§èœå•æ ¼å¼ï¼Œä¸‹é¢åˆ—ä¸¾æœ€å¸¸ç”¨çš„èœå•å±‚çº§æ¨¡å¼ï¼Œæ›´æ·±å±‚çº§æŒ‰ç…§ä¸‹é¢æ ¼å¼å³å¯

å¹³å°ç”¨ `mock` æ¨¡æ‹Ÿåç«¯ï¼Œä¸‹é¢ä¸¾ä¾‹ä¹Ÿæ˜¯ç”¨ `mock` ä¸¾ä¾‹å“¦ï¼Œå½“ç„¶å’Œåç«¯è¿”å›çš„è·¯ç”±æ ¼å¼æ˜¯ä¸€æ¨¡ä¸€æ ·çš„

:::tip é˜…è¯»å‰é¡»çŸ¥

åç«¯ä¼  `path` æˆ–ä¼  `component`ï¼Œå¹³å°å¯¹è¿™ä¸¤ç§æ¨¡å¼éƒ½åšäº†å…¼å®¹ [å…·ä½“å®ç°ä»£ç  1](https://github.com/pure-admin/vue-pure-admin/blob/main/src/router/utils.ts#L27) [å…·ä½“å®ç°ä»£ç  2](https://github.com/pure-admin/vue-pure-admin/blob/main/src/router/utils.ts#L317-L321)

`ç¬¬ä¸€ç§`ï¼šä¸‹é¢æ‰€æœ‰ç”Ÿæˆèœå•ä¾‹å­ä¸­çš„ `path` éƒ½æœ‰ä¸ªè§„åˆ™ï¼šå¦‚æœè¿™ä¸ª `path` å¯¹åº”çš„æ˜¯å®é™…ä¸šåŠ¡ `.vue` æˆ– `.tsx` ä»£ç ï¼Œå°±å¿…é¡»è·Ÿå®é™…ä¸šåŠ¡ `.vue` æˆ– `.tsx` ä»£ç è·¯å¾„ä¿æŒä¸€è‡´

`ç¬¬äºŒç§`ï¼šèœå•çš„ `component` å¯¹åº”å®é™…ä¸šåŠ¡ `.vue` æˆ– `.tsx` ä»£ç è·¯å¾„ï¼Œè¿™æ—¶ `path` å¯ä»¥éšä¾¿å†™å•¦ï¼Œä½†æ˜¯å‰é¢å¿…é¡»æœ‰ä¸ª `/` ï¼Œæ¯”å¦‚ `path: '/anything'` ï¼ˆè¿™ç§æƒ…å†µæˆ‘åªåœ¨ [å¦‚ä½•ç”Ÿæˆä¸€çº§èœå•](#å¦‚ä½•ç”Ÿæˆä¸€çº§èœå•-2) é‡Œä¸¾ä¾‹ï¼Œå¤šçº§èœå•å†™æ³•ç±»ä¼¼ï¼‰

::: details ç‚¹å‡»æŸ¥çœ‹å…·ä½“å®ç°ä»£ç é€»è¾‘è§£æ

```Ts {4,14,28,29,30,31}
// å…·ä½“å®ç°ä»£ç 1é«˜äº®å¤„è§£æï¼š
// å°†/src/views/æ–‡ä»¶é‡Œæ‰€æœ‰çš„.vueå’Œ.tsxæ–‡ä»¶å¡è¿›modulesRouteså˜é‡
// å½“ç„¶è¿™é‡ŒåªåŒ¹é…äº†`.vue`å’Œ`.tsx`ï¼Œå¦‚æœæ‚¨æƒ³åŒ¹é…åˆ«çš„åœ¨ä¸‹é¢ {} åŠ ä¸Šå³å¯ï¼Œè®°å¾—ç”¨ , åˆ†å¼€
const modulesRoutes = import.meta.glob("/src/views/**/*.{vue,tsx}");

// å…·ä½“å®ç°ä»£ç 2é«˜äº®å¤„è§£æï¼š
// addAsyncRouteså‡½æ•°ä½œç”¨ä¸ºè¿‡æ»¤åç«¯ä¼ æ¥çš„åŠ¨æ€è·¯ç”±ï¼Œé‡æ–°ç”Ÿæˆè§„èŒƒè·¯ç”±ï¼Œ
// å…ˆè¯»å–åç«¯è¿”å›çš„æ‰€æœ‰è·¯ç”±ï¼Œä»ä¸­è¿‡æ»¤å‡ºcomponentå’Œpathå­—æ®µï¼Œç„¶ååœ¨modulesRoutesKeysä¸­å¯¹åº”åŒ¹é…ï¼Œ
// å¦‚æœå¯¹åº”è·¯ç”±åŒæ—¶åŒ¹é…åˆ°componentå’Œpathï¼Œä¼˜å…ˆä»¥componentä¸ºä¸»ï¼Œè¿™æ ·æ‚¨çš„pathè·¯å¾„å°±å¯ä»¥éšä¾¿å†™å•¦ï¼Œ
// å¦‚æœåŒ¹é…åˆ°pathæœªåŒ¹é…åˆ°componentï¼Œpathå¿…é¡»æŒ‰ä¸Šé¢æåˆ°çš„è·Ÿå®é™…ä¸šåŠ¡`.vue`æˆ–`.tsx`ä»£ç è·¯å¾„ä¿æŒä¸€è‡´ï¼Œ
// å¦‚æœåŒ¹é…åˆ°componentæœªåŒ¹é…åˆ°pathæˆ–è€…ä¸¤ä¸ªéƒ½æœªåŒ¹é…åˆ°ï¼Œæˆ‘æƒ³é—®é—®æ‚¨å’±èƒ½å¥½å¥½ç©ä¸ğŸ˜­
function addAsyncRoutes(arrRoutes: Array<RouteRecordRaw>) {
  if (!arrRoutes || !arrRoutes.length) return;
  const modulesRoutesKeys = Object.keys(modulesRoutes);
  arrRoutes.forEach((v: RouteRecordRaw) => {
    // å°†backstageå±æ€§åŠ å…¥metaï¼Œæ ‡è¯†æ­¤è·¯ç”±ä¸ºåç«¯è¿”å›è·¯ç”±
    v.meta.backstage = true;
    // çˆ¶çº§çš„redirectå±æ€§å–å€¼ï¼šå¦‚æœå­çº§å­˜åœ¨ä¸”çˆ¶çº§çš„redirectå±æ€§ä¸å­˜åœ¨ï¼Œé»˜è®¤å–ç¬¬ä¸€ä¸ªå­çº§çš„pathï¼›å¦‚æœå­çº§å­˜åœ¨ä¸”çˆ¶çº§çš„redirectå±æ€§å­˜åœ¨ï¼Œå–å­˜åœ¨çš„redirectå±æ€§ï¼Œä¼šè¦†ç›–é»˜è®¤å€¼
    if (v?.children && v.children.length && !v.redirect)
      v.redirect = v.children[0].path;
    // çˆ¶çº§çš„nameå±æ€§å–å€¼ï¼šå¦‚æœå­çº§å­˜åœ¨ä¸”çˆ¶çº§çš„nameå±æ€§ä¸å­˜åœ¨ï¼Œé»˜è®¤å–ç¬¬ä¸€ä¸ªå­çº§çš„nameï¼›å¦‚æœå­çº§å­˜åœ¨ä¸”çˆ¶çº§çš„nameå±æ€§å­˜åœ¨ï¼Œå–å­˜åœ¨çš„nameå±æ€§ï¼Œä¼šè¦†ç›–é»˜è®¤å€¼ï¼ˆæ³¨æ„ï¼šæµ‹è¯•ä¸­å‘ç°çˆ¶çº§çš„nameä¸èƒ½å’Œå­çº§nameé‡å¤ï¼Œå¦‚æœé‡å¤ä¼šé€ æˆé‡å®šå‘æ— æ•ˆï¼ˆè·³è½¬404ï¼‰ï¼Œæ‰€ä»¥è¿™é‡Œç»™çˆ¶çº§çš„nameèµ·åçš„æ—¶å€™åé¢ä¼šè‡ªåŠ¨åŠ ä¸Š`Parent`ï¼Œé¿å…é‡å¤ï¼‰
    if (v?.children && v.children.length && !v.name)
      v.name = (v.children[0].name as string) + "Parent";
    if (v.meta?.frameSrc) {
      v.component = IFrame;
    } else {
      // å¯¹åç«¯ä¼ componentç»„ä»¶è·¯å¾„å’Œä¸ä¼ åšå…¼å®¹ï¼ˆå¦‚æœåç«¯ä¼ componentç»„ä»¶è·¯å¾„ï¼Œé‚£ä¹ˆpathå¯ä»¥éšä¾¿å†™ï¼Œå¦‚æœä¸ä¼ ï¼Œcomponentç»„ä»¶è·¯å¾„ä¼šè·Ÿpathä¿æŒä¸€è‡´ï¼‰
      const index = v?.component
        ? modulesRoutesKeys.findIndex(ev => ev.includes(v.component as any))
        : modulesRoutesKeys.findIndex(ev => ev.includes(v.path));
      v.component = modulesRoutes[modulesRoutesKeys[index]];
    }
    if (v?.children && v.children.length) {
      addAsyncRoutes(v.children);
    }
  });
  return arrRoutes;
}
```

:::

### å¦‚ä½•ç”Ÿæˆä¸€çº§èœå•

#### åªä¼  `path` æ¨¡å¼

::: details

æ¯”å¦‚æˆ‘ä»¬è¦ç”Ÿæˆä¸€ä¸ªåä¸º `åŠ æ²¹` çš„èœå•

1. æ¥åˆ° `mock/asyncRoutes.ts` æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹ä»£ç 

`asyncRoutes.ts`

```Ts
// æœ€ç®€ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å­—æ®µå¿…é¡»æœ‰
const fightingRouter = {
  path: "/fighting",
  meta: {
    title: "åŠ æ²¹"
  },
  children: [
    {
      path: "/fighting/index",
      name: "Fighting",
      meta: {
        title: "åŠ æ²¹"
      }
    }
  ]
};
```

2. æ–°å»º `src/views/fighting/index.vue` æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹ä»£ç 

`index.vue`

```Vue
<script setup lang="ts">
defineOptions({
  // name ä½œä¸ºä¸€ç§è§„èŒƒæœ€å¥½å¿…é¡»å†™ä¸Šå¹¶ä¸”å’Œè·¯ç”±çš„nameä¿æŒä¸€è‡´
  name: "Fighting"
});
</script>

<template>
  <h1>åŠ æ²¹</h1>
</template>
```

ä¸Šé¢æ‰€å†™ä»£ç å¦‚ä¸‹å›¾æ•ˆæœ

![img](~@alias/img/router/async1.jpg)

:::

#### ä¼  `path` å’Œ `component` æ¨¡å¼

::: details

æ¯”å¦‚æˆ‘ä»¬è¦ç”Ÿæˆä¸€ä¸ªåä¸º `åŠ æ²¹` çš„èœå•

1. æ¥åˆ° `mock/asyncRoutes.ts` æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹ä»£ç 

`asyncRoutes.ts`

```Ts
// æœ€ç®€ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å­—æ®µå¿…é¡»æœ‰
const fightingRouter = {
  path: "/fighting",
  meta: {
    title: "åŠ æ²¹"
  },
  children: [
    {
      // pathéšä¾¿å†™ï¼Œä½†å‰é¢å¿…é¡»æœ‰ä¸ª `/`
      path: "/anything",
      // componentå¯¹åº”çš„å€¼å‰ä¸éœ€è¦åŠ  / å€¼å¯¹åº”çš„æ˜¯å®é™…ä¸šåŠ¡ `.vue` æˆ– `.tsx` ä»£ç è·¯å¾„
      component: "fighting/index",
      name: "Fighting",
      meta: {
        title: "åŠ æ²¹"
      }
    }
  ]
};
```

2. æ–°å»º `src/views/fighting/index.vue` æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹ä»£ç 

`index.vue`

```Vue
<script setup lang="ts">
defineOptions({
  // name ä½œä¸ºä¸€ç§è§„èŒƒæœ€å¥½å¿…é¡»å†™ä¸Šå¹¶ä¸”å’Œè·¯ç”±çš„nameä¿æŒä¸€è‡´
  name: "Fighting"
});
</script>

<template>
  <h1>åŠ æ²¹</h1>
</template>
```

ä¸Šé¢æ‰€å†™ä»£ç å¦‚ä¸‹å›¾æ•ˆæœ

![img](~@alias/img/router/async2.jpg)

:::tip çŒœæ‚¨å¯èƒ½æœ‰è¿™ç§æƒ³æ³• ğŸ¤”ï¸

![img](~@alias/img/router/async3.jpg)

:::

### å¦‚ä½•ç”ŸæˆäºŒçº§èœå•ï¼ˆä¸¤ç§æ¨¡å¼ï¼‰

#### ç¬¬ä¸€ç§ï¼ˆè¯¥æ¨¡å¼é’ˆå¯¹çˆ¶çº§èœå•ä¸‹åªæœ‰ä¸€ä¸ªå­èœå•çš„æƒ…å†µï¼Œåœ¨å­èœå•çš„ `meta` å±æ€§ä¸­åŠ ä¸Š `showParent: true` å³å¯ï¼‰

::: details ç‚¹å‡»æŸ¥çœ‹

```Ts
// æœ€ç®€ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å­—æ®µå¿…é¡»æœ‰
const fightingRouter = {
  path: "/fighting",
  meta: {
    title: "åŠ±å¿—"
  },
  children: [
    {
      path: "/fighting/index",
      name: "Fighting",
      meta: {
        title: "åŠ æ²¹",
        // é€šè¿‡è®¾ç½®showParentä¸ºtrueï¼Œæ˜¾ç¤ºçˆ¶çº§
        showParent: true
      }
    }
  ]
};
```

å¦‚ä¸‹å›¾æ•ˆæœ

![img](~@alias/img/router/async4.jpg)

:::

#### ç¬¬äºŒç§ï¼ˆè¯¥æ¨¡å¼é’ˆå¯¹çˆ¶çº§èœå•ä¸‹æœ‰å¤§äºæˆ–ç­‰äºä¸¤ä¸ªå­èœå•çš„æƒ…å†µï¼‰

::: details ç‚¹å‡»æŸ¥çœ‹

```Ts
// æœ€ç®€ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å­—æ®µå¿…é¡»æœ‰
const fightingRouter = {
  path: "/fighting",
  meta: {
    title: "åŠ±å¿—"
  },
  children: [
    {
      path: "/fighting/index",
      name: "Fighting",
      meta: {
        title: "åŠ æ²¹"
      }
    },
    {
      path: "/fighting/effort",
      name: "Effort",
      meta: {
        title: "åŠªåŠ›"
      }
    }
  ]
};
```

å¦‚ä¸‹å›¾æ•ˆæœ

![img](~@alias/img/router/async5.jpg)

:::

### å¦‚ä½•ç”Ÿæˆä¸‰çº§èœå•ï¼ˆä¸¤ç§æ¨¡å¼ï¼‰

#### ç¬¬ä¸€ç§ï¼ˆè¯¥æ¨¡å¼é’ˆå¯¹çˆ¶çº§èœå•ä¸‹åªæœ‰ä¸€ä¸ªå­èœå•çš„æƒ…å†µï¼Œåœ¨å­èœå•çš„ `meta` å±æ€§ä¸­åŠ ä¸Š `showParent: true` å³å¯ï¼‰

::: details ç‚¹å‡»æŸ¥çœ‹

```Ts
// æœ€ç®€ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å­—æ®µå¿…é¡»æœ‰
const nestedRouter = {
  path: "/nested",
  meta: {
    title: "å¤šçº§èœå•"
  },
  children: [
    {
      path: "/nested/menu1",
      meta: {
        title: "èœå•1"
      },
      children: [
        {
          path: "/nested/menu1/menu1-1/index",
          name: "Menu1-1",
          meta: {
            title: "èœå•1-1",
            // é€šè¿‡è®¾ç½®showParentä¸ºtrueï¼Œæ˜¾ç¤ºçˆ¶çº§
            showParent: true
          }
        }
      ]
    }
  ]
};
```

å¦‚ä¸‹å›¾æ•ˆæœ

![img](~@alias/img/router/async6.jpg)

:::

#### ç¬¬äºŒç§ï¼ˆè¯¥æ¨¡å¼é’ˆå¯¹çˆ¶çº§èœå•ä¸‹æœ‰å¤§äºæˆ–ç­‰äºä¸¤ä¸ªå­èœå•çš„æƒ…å†µï¼‰

::: details ç‚¹å‡»æŸ¥çœ‹

```Ts
// æœ€ç®€ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å­—æ®µå¿…é¡»æœ‰
const nestedRouter = {
  path: "/nested",
  meta: {
    title: "å¤šçº§èœå•"
  },
  children: [
    {
      path: "/nested/menu1",
      meta: {
        title: "èœå•1"
      },
      children: [
        {
          path: "/nested/menu1/menu1-1/index",
          name: "Menu1-1",
          meta: {
            title: "èœå•1-1"
          }
        },
        {
          path: "/nested/menu1/menu1-2/index",
          name: "Menu1-2",
          meta: {
            title: "èœå•1-2"
          }
        }
      ]
    }
  ]
};
```

å¦‚ä¸‹å›¾æ•ˆæœ

![img](~@alias/img/router/async7.jpg)

:::

### å¦‚ä½•ç”Ÿæˆå››çº§èœå•ï¼ˆä¸¤ç§æ¨¡å¼ï¼‰

#### ç¬¬ä¸€ç§ï¼ˆè¯¥æ¨¡å¼é’ˆå¯¹çˆ¶çº§èœå•ä¸‹åªæœ‰ä¸€ä¸ªå­èœå•çš„æƒ…å†µï¼Œåœ¨å­èœå•çš„ `meta` å±æ€§ä¸­åŠ ä¸Š `showParent: true` å³å¯ï¼‰

::: details ç‚¹å‡»æŸ¥çœ‹

```Ts
// æœ€ç®€ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å­—æ®µå¿…é¡»æœ‰
const nestedRouter = {
  path: "/nested",
  meta: {
    title: "å¤šçº§èœå•"
  },
  children: [
    {
      path: "/nested/menu1",
      meta: {
        title: "èœå•1"
      },
      children: [
        {
          path: "/nested/menu1/menu1-1",
          meta: {
            title: "èœå•1-1"
          },
          children: [
            {
              path: "/nested/menu1/menu1-1/menu1-1-1/index",
              name: "Menu1-1-1",
              meta: {
                title: "èœå•1-1-1",
                // é€šè¿‡è®¾ç½®showParentä¸ºtrueï¼Œæ˜¾ç¤ºçˆ¶çº§
                showParent: true
              }
            }
          ]
        }
      ]
    }
  ]
};
```

å¦‚ä¸‹å›¾æ•ˆæœ

![img](~@alias/img/router/async8.jpg)

:::

#### ç¬¬äºŒç§ï¼ˆè¯¥æ¨¡å¼é’ˆå¯¹çˆ¶çº§èœå•ä¸‹æœ‰å¤§äºæˆ–ç­‰äºä¸¤ä¸ªå­èœå•çš„æƒ…å†µï¼‰

::: details ç‚¹å‡»æŸ¥çœ‹

```Ts
// æœ€ç®€ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å­—æ®µå¿…é¡»æœ‰
const nestedRouter = {
  path: "/nested",
  meta: {
    title: "å¤šçº§èœå•"
  },
  children: [
    {
      path: "/nested/menu1",
      meta: {
        title: "èœå•1"
      },
      children: [
        {
          path: "/nested/menu1/menu1-1",
          meta: {
            title: "èœå•1-1"
          },
          children: [
            {
              path: "/nested/menu1/menu1-1/menu1-1-1/index",
              name: "Menu1-1-1",
              meta: {
                title: "èœå•1-1-1"
              }
            },
            {
              path: "/nested/menu1/menu1-1/menu1-1-2/index",
              name: "Menu1-1-2",
              meta: {
                title: "èœå•1-1-2"
              }
            }
          ]
        }
      ]
    }
  ]
};
```

å¦‚ä¸‹å›¾æ•ˆæœ

![img](~@alias/img/router/async9.jpg)

:::

### æ³¨æ„ç‚¹

#### åŠ¨æ€è·¯ç”±ç¼“å­˜æœ¬åœ°

å¹³å°åœ¨ `v3.9.7` ç‰ˆæœ¬ [é»˜è®¤å…³é—­ CachingAsyncRoutes åŠ¨æ€è·¯ç”±ç¼“å­˜æœ¬åœ°](https://github.com/pure-admin/vue-pure-admin/blob/main/public/platform-config.json#L23) ä½¿å…¶åœ¨å¼€å‘ç¯å¢ƒä¸‹è°ƒè¯•æ›´æ–¹ä¾¿ï¼Œä¸ç”¨æ¯æ¬¡ä¿®æ”¹åŠ¨æ€è·¯ç”±éƒ½è¦å…ˆæ¸…ç©ºæœ¬åœ°ç¼“å­˜çš„åŠ¨æ€è·¯ç”±ï¼Œæ›´æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒå¼€å¯

å¼€å¯åŠ¨æ€è·¯ç”±ç¼“å­˜æœ¬åœ°åä¼šä¼˜å…ˆè¯»å–æœ¬åœ°ç¼“å­˜çš„è·¯ç”± [ç‚¹å‡»æŸ¥çœ‹å…·ä½“å®ç°ä»£ç ](https://github.com/pure-admin/vue-pure-admin/blob/main/src/router/utils.ts#L195-L202) å¦‚æœæ‚¨åœ¨å¼€å‘ç¯å¢ƒä¸‹å¼€å¯ï¼Œæ¯æ¬¡ä¿®æ”¹åŠ¨æ€è·¯ç”±éƒ½éœ€è¦å…ˆæ¸…ç©º `async-routes` è¿™ä¸ªé”®åçš„ `sessionStorage` [ç‚¹å‡»æŸ¥çœ‹å‚è€ƒä»£ç ](https://github.com/pure-admin/vue-pure-admin/blob/main/src/views/permission/page/index.vue#L37)

![img](~@alias/img/router/static14.jpg)

#### å›½é™…åŒ–

åªéœ€è¦åœ¨è·¯ç”± `meta` çš„ `title` å­—æ®µä¸­ä½¿ç”¨å›½é™…åŒ–å†™æ³•å³å¯ï¼Œæ¯”å¦‚ `title: "menus.hssysManagement"`  
è¿™ä¸ª `menus.hssysManagement` å¿…é¡»åœ¨ `locales` æ–‡ä»¶å¤¹ä¸‹è¿›è¡Œé…ç½®å“¦ï¼Œå¦‚ä¸‹å›¾

![img](~@alias/img/router/async10.jpg)

#### é‡å®šå‘

åŠ¨æ€è·¯ç”±æ— éœ€å¡«å†™ `redirect` é‡å®šå‘å±æ€§
å¹³å°è‡ªåŠ¨å¤„ç†ï¼Œé€»è¾‘ä¸ºï¼šå¦‚æœå­çº§å­˜åœ¨ä¸”çˆ¶çº§çš„ `redirect` å±æ€§ä¸å­˜åœ¨ï¼Œé»˜è®¤å–ç¬¬ä¸€ä¸ªå­çº§çš„ `path` ä½œä¸ºçˆ¶çº§çš„ `redirect`

å½“ç„¶æ‚¨ä¹Ÿå¯ä»¥æŒ‡å®šçˆ¶çº§çš„ `redirect` é‡å®šå‘å±æ€§ï¼Œå¹³å°ç›‘æµ‹åˆ°å­˜åœ¨æŒ‡å®šçˆ¶çº§çš„ `redirect` åï¼Œä¼šå–æŒ‡å®šçš„å±æ€§

[ç‚¹å‡»æŸ¥çœ‹å…·ä½“å®ç°ä»£ç ](https://github.com/pure-admin/vue-pure-admin/blob/main/src/router/utils.ts#L308-L310)

#### é‡ç½®è·¯ç”±

å¹³å°çš„é‡ç½®è·¯ç”±åŠŸèƒ½åªé’ˆå¯¹åŠ¨æ€è·¯ç”±

##### å¸¸ç”¨åœºæ™¯

ç”¨æˆ·åˆ‡æ¢è§’è‰²æˆ–é€€å‡ºç™»å½•æ—¶éœ€è°ƒç”¨é‡ç½®è·¯ç”±åŠŸèƒ½ï¼Œå°†è·¯ç”±å’Œèœå•æ¢å¤åˆ°åˆå§‹åŒ–çŠ¶æ€

##### åŸºç¡€ç”¨æ³•

```Ts
import { resetRouter } from "@/router";

resetRouter();
```

##### å…·ä½“å®ç°ä»£ç 

[ç‚¹å‡»æŸ¥çœ‹å…·ä½“å®ç°ä»£ç ](https://github.com/pure-admin/vue-pure-admin/blob/main/src/router/index.ts#L89-L102)

## é™æ€è·¯ç”±ã€åŠ¨æ€è·¯ç”±ç›¸åŒçš„é…ç½®

ä¸‹é¢ä»¥åŠ¨æ€è·¯ç”±è¿”å›ä¸¾ä¾‹ï¼Œé™æ€è·¯ç”±ä¹Ÿæ˜¯ç›¸åŒçš„é…ç½®ï¼ŒåŒºåˆ«æ˜¯é™æ€è·¯ç”±éœ€å†™åœ¨ `src/router/modules` é‡Œ

### å†…åµŒ `iframe` å’Œå¤–é“¾

::: details ç‚¹å‡»æŸ¥çœ‹

è¯»é‡ç‚¹ï¼šå†…åµŒ `iframe` å°†åœ°å€å†™è¿› `frameSrc` å±æ€§é‡Œï¼›å¤–é“¾å°†åœ°å€å†™è¿› `name` å±æ€§é‡Œ  
å…·ä½“ä»£ç å®ç°ï¼š[å†…åµŒ `iframe`](https://github.com/pure-admin/vue-pure-admin/blob/main/src/layout/frame.vue) [å¤–é“¾](https://github.com/pure-admin/vue-pure-admin/blob/main/src/router/index.ts#L144-L146)

```Ts
// æœ€ç®€ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å­—æ®µå¿…é¡»æœ‰
const frameRouter = {
  path: "/iframe",
  meta: {
    title: "å†…åµŒ iframe å’Œå¤–é“¾"
  },
  children: [
    // å†…åµŒ iframe
    {
      path: "/iframe/pure",
      // nameå¿…é¡»å†™ï¼Œå†™æ³•éšæ„
      name: "anything",
      meta: {
        title: "å†…åµŒ iframe",
        // éœ€è¦å†…åµŒé¡µé¢çš„åœ°å€
        frameSrc: "https://pure-admin.cn",
        // å†…åµŒçš„iframeé¡µé¢æ˜¯å¦å¼€å¯é¦–æ¬¡åŠ è½½åŠ¨ç”»ï¼Œé»˜è®¤trueï¼Œä¸‹é¢å¯ä»¥ä¸å†™ï¼Œå¦‚æœå†…åµŒçš„iframeé¡µé¢å·²ç»å­˜åœ¨é¦–åŠ è½½åŠ¨ç”»ï¼Œå¯ä»¥å°†frameLoadingè®¾ä¸ºfalse
        // frameLoading: true
      }
    },
    // å¤–é“¾
    {
      // pathå¿…é¡»å†™ï¼Œå¿…é¡»ä»¥ / å¼€å¤´ï¼Œæ¨èæ ¼å¼ / åè·Ÿéšæ„å•è¯ï¼Œä¸åŒçš„å¤–é“¾pathä¸è¦é‡å¤å“¦
      path: "/anything",
      // å¤–é“¾åœ°å€å†™åœ¨nameå±æ€§é‡Œ
      name: "https://pure-admin.cn",
      meta: {
        title: " å¤–é“¾"
      }
    }
  ]
};
```

å¦‚ä¸‹å›¾æ•ˆæœ

![img](~@alias/img/router/same1.jpg)

:::

### èœå•æ’åº `rank`

åœ¨è·¯ç”±çš„ `meta` é‡ŒåŠ å…¥ `rank` å­—æ®µå³å¯å¯¹èœå•è¿›è¡Œæ’åºï¼Œ`rank` å¯ä¸å†™ã€å¯ä¸º `null`ã€å¯ä¸º `undefined`ã€å¯ä¸ºç©ºå€¼ï¼Œä½†æ˜¯å¹³å°æ¨è `rank` æœ€å¥½åŠ ä¸Šï¼Œå¯¹èœå•è¿›è¡Œæœ‰åºæ’åˆ—ä½¿å…¶çœ‹èµ·æ¥æ•´é½ï¼Œè€Œä¸”è¿˜èƒ½é€šè¿‡æ’åºæŠŠæ‚¨æƒ³è¦ç¬¬ä¸€çœ¼çœ‹åˆ°çš„èœå•æ”¾åˆ°æœ€å‰é¢

[ç‚¹å‡»æŸ¥çœ‹å…·ä½“å®ç°ä»£ç ](https://github.com/pure-admin/vue-pure-admin/blob/main/src/router/utils.ts#L32-L53)

:::tip æ¸©é¦¨æç¤º
èœå•æ’åº `rank` åªå¯¹é¡¶çº§èœå•ç”Ÿæ•ˆ [ç‚¹å‡»æŸ¥çœ‹ä¸ºä½•å¦‚æ­¤è®¾è®¡](https://github.com/pure-admin/vue-pure-admin/issues/154#issuecomment-996571156)  
![img](~@alias/img/router/same2.jpg)
:::

### èœå•å›¾æ ‡ `icon`

[ç‚¹å‡»æŸ¥çœ‹å¦‚ä½•é…ç½®èœå•å›¾æ ‡](/pages/icon/#å¯¼èˆªèœå•çš„-icon-å¦‚ä½•é…ç½®)

### è·¯ç”±é¡µé¢ç¼“å­˜ `keepAlive`

åœ¨è·¯ç”±çš„ `meta` é‡ŒåŠ å…¥ `keepAlive: true` å³å¯å¯¹å½“å‰è·¯ç”±é¡µé¢è¿›è¡Œç¼“å­˜ï¼Œè¢«ç¼“å­˜çš„è·¯ç”±é¡µé¢ä¸ä¼šè¢«é”€æ¯

<!-- <video width="320" height="240" controls>
  <source :src="$withBase('/video/same3.mov')" type="video/mp4">
</video> -->

ç”Ÿæ•ˆå‰æï¼šå¯¹åº”é¡µé¢ `name` å¿…é¡»ä¸è·¯ç”±çš„ `name` ä¿æŒä¸€è‡´

![img](~@alias/img/router/same4.jpg)

è™½ç„¶ `vue-router` å®˜æ–¹åªæ”¯æŒåˆ°äºŒçº§ `keep-alive` ç¼“å­˜ï¼Œä½†å¹³å°å¯¹è·¯ç”±è¿›è¡Œäº† [å¤„ç†](https://github.com/pure-admin/vue-pure-admin/blob/main/src/router/utils.ts#L246)ï¼Œåªè¦å¯¹å½“å‰è·¯ç”±è®¾ç½®äº† `keepAlive: true`ï¼Œå¹¶ä¸”å¯¹åº”çš„é¡µé¢ `name` ä¸è·¯ç”±çš„ `name` ä¿æŒä¸€è‡´ï¼Œä¸ç®¡å±‚çº§å¤šæ·±éƒ½ä¼šæ”¯æŒ `keep-alive` ç¼“å­˜

### é¡µé¢è¿›åœºã€ç¦»åœºåŠ¨ç”»å®šåˆ¶åŒ– `transition`

åœ¨è·¯ç”±çš„ `meta` é‡ŒåŠ å…¥ä¸‹é¢ä»£ç å³å¯å®šåˆ¶åŒ–å•ä¸ªé¡µé¢è¿›åœºã€ç¦»åœºåŠ¨ç”»ï¼Œå¹³å°å†…ç½®äº† `Animate.css` ï¼Œæ‰€ä»¥æ‚¨ç›´æ¥åœ¨ [Animate.css](https://animate.style/) æœ€å³ä¾§å¤åˆ¶æ‰€éœ€åŠ¨ç”»å³å¯

```Ts
transition: {
  // é¡µé¢è¿›åœºåŠ¨ç”»
  enterTransition: "animate__fadeInRight",
  // é¡µé¢ç¦»åœºåŠ¨ç”»
  leaveTransition: "animate__fadeOutDown"
}
```

<!-- <video width="320" height="240" controls>
  <source :src="$withBase('/video/same5.mov')" type="video/mp4">
</video> -->

[ç‚¹å‡»æŸ¥çœ‹å…·ä½“å®ç°ä»£ç ](https://github.com/pure-admin/vue-pure-admin/blob/main/src/layout/components/lay-content/index.vue#L77-L107)

### é¡µé¢å’ŒæŒ‰é’®çº§åˆ«æƒé™è®¾ç½®

å¹³å°å†…ç½® `RBAC` æƒé™æ¨¡å¼ï¼Œæ— è®ºé™æ€è¿˜æ˜¯åŠ¨æ€è·¯ç”±ï¼Œé…ç½®éƒ½ä¼šç”Ÿæ•ˆï¼Œç‚¹å‡»æŸ¥çœ‹å…·ä½“ [RBAC æƒé™è®²è§£](/pages/RBAC/)

## å¸¸è§ç–‘é—®

### ä¸ºä»€ä¹ˆè·¯ç”±çš„ `name` å¿…å†™ï¼Œè€Œä¸”å¿…é¡»å”¯ä¸€

1. æ²¡æœ‰ç¡¬ç¼–ç çš„ `URL` ï¼›`params` çš„è‡ªåŠ¨ç¼–ç /è§£ç ï¼›é˜²æ­¢åœ¨ `url` ä¸­å‡ºç°æ‰“å­—é”™è¯¯ï¼›ç»•è¿‡è·¯å¾„æ’åºï¼ˆå¦‚æ˜¾ç¤ºä¸€ä¸ªï¼‰ [ç‚¹å‡»äº†è§£å…·ä½“](https://router.vuejs.org/zh/guide/essentials/named-routes.html#%E5%91%BD%E5%90%8D%E8%B7%AF%E7%94%B1)
2. è™½ç„¶è·³è½¬è·¯ç”±æœ‰å¾ˆå¤šæ–¹å¼ï¼Œä½†å¹³å°åªæ¨èä½¿ç”¨ `name` è·³è½¬ï¼Œå¦‚ä¸‹é¢å†™æ³•ã€‚ä¼˜ç‚¹ï¼šä¸€æ˜¯å†™æ³•ç®€å•ï¼Œå°¤å…¶å½“ `path` ç¨é•¿æ—¶ä¼˜ç‚¹æ›´çªå‡ºï¼Œå› ä¸º `name` åªæœ‰ä¸€ä¸ªå•è¯ï¼›äºŒæ˜¯è§„èŒƒç»Ÿä¸€ï¼Œéƒ½ç”¨ `name` è·³è½¬ä¹Ÿæ–¹ä¾¿ç»´æŠ¤ã€‚å°¤å…¶å½“é¡¹ç›®è¿‡å¤§æ—¶å¯¹æ•´ä½“ç»´æŠ¤èµ·å…³é”®ä½œç”¨

```Vue
<script setup lang="ts">
import { useRouter } from "vue-router";

const router = useRouter();
router.push({ name: 'Fighting' })
</script>
```

3. å¹³å°çš„æŸäº›å…³é”®æ¨¡å—ï¼ˆè·¯ç”±æ¨¡å—ã€æ ‡ç­¾æ¨¡å—ç­‰ï¼‰éƒ½ä¾èµ– `name`ï¼Œæ‰€ä»¥ç‹¬ä¸€æ— äºŒçš„ `name` å¯¹å¹³å°çš„ç¨³å®šæ€§èµ·å…³é”®ä½œç”¨

### ä¸ºä»€ä¹ˆè·¯ç”±çš„ `name` éœ€å’Œé¡µé¢çš„ `name` ä¿æŒä¸€è‡´ï¼Ÿ

æ­£å¸¸æƒ…å†µä¸‹è¿™å¹¶ä¸æ˜¯ç¡¬æ€§è¦æ±‚ï¼Œè€Œæ˜¯ä¸€ç§è§„èŒƒï¼Œæ–¹ä¾¿ç»´æŠ¤æŸ¥æ‰¾ï¼Œé€šè¿‡è·¯ç”± `name` å…¨å±€æœç´¢å³å¯çŸ¥é“å¯¹åº”é¡µé¢ä»£ç ä½ç½®ï¼Œé€šè¿‡é¡µé¢å¯¹åº”çš„ `name` ä¹Ÿå¯çŸ¥é“å…¶å¯¹åº”å“ªä¸ªè·¯ç”±

å½“ç„¶ï¼Œå¦‚æœå½“å‰è·¯ç”±é¡µé¢éœ€è¦ [è·¯ç”±é¡µé¢ç¼“å­˜ keepAlive](#è·¯ç”±é¡µé¢ç¼“å­˜-keepalive) å°±å¿…é¡»ä¿æŒä¸€è‡´

## æ›´å¤šè·¯ç”±è·³è½¬ç¤ºä¾‹ä»£ç 

[ç‚¹å‡»æŸ¥çœ‹ç¤ºä¾‹ä»£ç ](https://github.com/pure-admin/vue-pure-admin/tree/main/src/views/tabs)

æ•ˆæœå¦‚ä¸‹

![img](~@alias/img/router/more.jpg)
