---
title: å¸¸è§é—®é¢˜
article: false
date: 2022-11-07
permalink: /pages/FAQ/
---

## æ˜¯å¦æ”¯æŒ `IE` ï¼Ÿ

ç­”ï¼š`vue3` å®˜æ–¹è¯´è¿‡ä¸æ”¯æŒ `IE`ï¼Œå…·ä½“çœ‹ [rfcs](https://github.com/vuejs/rfcs/blob/master/active-rfcs/0038-vue3-ie11-support.md) å’Œ [cn.vuejs](https://cn.vuejs.org/about/faq.html#what-browsers-does-vue-support)ã€‚å½“ç„¶æœ‰äººä¼šè¯´ [@vitejs/plugin-legacy](https://cn.vitejs.dev/plugins/#vitejsplugin-legacy) ä¼šæ”¯æŒ `IE`ï¼Œå®ƒçš„ç¡®ä¼šï¼Œä½†æ˜¯å®ƒæ˜¯ä¸€æ¬¾ `vite` æ’ä»¶ï¼Œåªå¯¹é `vue3` çš„æ¡†æ¶è¿›è¡Œæ”¯æŒï¼Œç›®å‰æ²¡æœ‰ä»»ä½•ä¸€æ¬¾å·¥å…·å¯ä»¥ä½¿ `vue3` æ”¯æŒ `IE` æµè§ˆå™¨ï¼Œå¦‚æœæ‚¨é¡¹ç›®éœ€è¦æ”¯æŒ `IE`ï¼Œè¯·æ…é‡è€ƒè™‘ä½¿ç”¨æœ¬å¹³å°ã€‚å¦‚æœæ‚¨æ—¢è¦ä½¿ç”¨æœ€æ–°æŠ€æœ¯å¹¶ä¸”åˆæƒ³ç¨³å®šåˆè¦å…¼å®¹ `IE` æµè§ˆå™¨çš„è¯å¯ä»¥é€‰æ‹© `vue2.7` çš„æŸä¸ªç‰ˆæœ¬æ­é… `vue-cli` æœ€æ–°ç‰ˆæœ¬

## ç²¾ç®€ç‰ˆæ˜¯å¹²å•¥çš„ï¼Ÿ

- ç­”ï¼šå®é™…é¡¹ç›®å¼€å‘è¯·ä½¿ç”¨ç²¾ç®€ç‰ˆï¼Œç²¾ç®€ç‰ˆæ˜¯åŸºäº [vue-pure-admin](https://github.com/pure-admin/vue-pure-admin) æç‚¼å‡ºçš„æ¶å­ï¼ŒåŒ…å«ä¸»ä½“åŠŸèƒ½ï¼Œæ›´é€‚åˆå®é™…é¡¹ç›®å¼€å‘ï¼Œæ‰“åŒ…åçš„å¤§å°åœ¨å…¨å±€å¼•å…¥ [element-plus](https://element-plus.org) çš„æƒ…å†µä¸‹ä»ç„¶ä½äº `2.3MB`ï¼Œå¹¶ä¸”ä¼šæ°¸ä¹…åŒæ­¥å®Œæ•´ç‰ˆçš„ä»£ç ã€‚å¼€å¯ `brotli` å‹ç¼©å’Œ `cdn` æ›¿æ¢æœ¬åœ°åº“æ¨¡å¼åï¼Œæ‰“åŒ…å¤§å°ä½äº `350kb`

![img](~@alias/img/guide/package.jpg)

## `husky` æ˜¯ä»€ä¹ˆï¼Ÿå¯ä»¥åˆ é™¤ `husky` æäº¤å‰æ ¡éªŒå—ï¼Ÿå¦‚ä½•å½»åº•åˆ é™¤ï¼Ÿ

- `husky` æ˜¯ä»€ä¹ˆï¼Ÿ  
  ç­”ï¼š[å®˜æ–¹æ–‡æ¡£](https://typicode.github.io/husky/#/)

- å¯ä»¥åˆ é™¤ `husky` æäº¤å‰æ ¡éªŒå—ï¼Ÿ  
  ç­”ï¼šå¦‚æœæ‚¨ä»¬æäº¤ä»£ç ä¸éœ€è¦ä¸¥æ ¼çš„æäº¤å‰æ ¡éªŒï¼Œè¿™å½“ç„¶å¯ä»¥åˆ é™¤

- å¦‚ä½•å½»åº•åˆ é™¤ï¼Ÿ  
  â‘  åˆ é™¤æ ¹ç›®å½• `.husky` æ–‡ä»¶å¤¹ä»¥åŠé‡Œé¢æ‰€æœ‰æ–‡ä»¶  
  â‘¡ åˆ é™¤æ ¹ç›®å½• `commitlint.config.js` æ–‡ä»¶  
  â‘¢ æ¥åˆ° `package.json` ä¸‹çš„ `devDependencies` ï¼Œåˆ é™¤ `@commitlint/cli` ã€ `@commitlint/config-conventional` ã€ `@commitlint/types` ã€ `husky` ã€ `lint-staged` è¿™äº›ä¾èµ–  
  â‘£ æœ€åæ¥åˆ° `package.json` ä¸‹çš„ `scripts` ï¼Œåˆ é™¤ `"prepare": "husky"` å‘½ä»¤å³å¯

## ä¸ºä»€ä¹ˆä½¿ç”¨ `pnpm` ï¼Ÿ `pnpm` å¤©ç”Ÿæ”¯æŒ `monorepo`ï¼Œä¸ºä»€ä¹ˆå¹³å°ä¸é‡‡ç”¨è¿™ç§æ¨¡å¼å‘¢ï¼Ÿ

- ä¸ºä»€ä¹ˆä½¿ç”¨ `pnpm`ï¼Ÿ  
  â‘  èŠ‚çº¦ç£ç›˜ç©ºé—´å¹¶æå‡å®‰è£…é€Ÿåº¦  
  å½“ä½¿ç”¨ `npm` æˆ– `Yarn` æ—¶ï¼Œå¦‚æœæ‚¨æœ‰ `100` ä¸ªé¡¹ç›®ä½¿ç”¨äº†æŸä¸ªä¾èµ–ï¼Œå°±ä¼šæœ‰ `100` ä»½è¯¥ä¾èµ–çš„å‰¯æœ¬ä¿å­˜åœ¨ç¡¬ç›˜ä¸Šã€‚ å¯¹äº `pnpm` ï¼Œä¾èµ–é¡¹å°†å­˜å‚¨åœ¨ä¸€ä¸ªå†…å®¹å¯å¯»å€çš„ä»“åº“ä¸­ï¼Œå› æ­¤ï¼šå¦‚æœæ‚¨ç”¨åˆ°äº†æŸä¾èµ–é¡¹çš„ä¸åŒç‰ˆæœ¬ï¼Œé‚£ä¹ˆåªä¼šå°†æœ‰å·®å¼‚çš„æ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå®ƒæœ‰ `100` ä¸ªæ–‡ä»¶ï¼Œè€Œæ–°ç‰ˆæœ¬åªæ”¹å˜äº†å…¶ä¸­ `1` ä¸ªæ–‡ä»¶ã€‚é‚£ä¹ˆ `pnpm update` åªä¼šå‘å­˜å‚¨ä¸­å¿ƒæ·»åŠ  `1` ä¸ªæ–°æ–‡ä»¶ï¼Œä¸ä¼šä»…å› ä¸ºå•ä¸€çš„æ”¹å˜è€Œå…‹éš†æ•´ä¸ªä¾èµ–ã€‚æ‰€æœ‰æ–‡ä»¶éƒ½ä¼šå­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šçš„åŒä¸€ä½ç½®ã€‚ å½“å¤šä¸ªåŒ…ï¼ˆ`package`ï¼‰è¢«å®‰è£…æ—¶ï¼Œæ‰€æœ‰æ–‡ä»¶éƒ½ä¼šä»åŒä¸€ä½ç½®åˆ›å»ºç¡¬é“¾æ¥ï¼Œä¸ä¼šå ç”¨é¢å¤–çš„ç£ç›˜ç©ºé—´ã€‚ è¿™å…è®¸æ‚¨è·¨é¡¹ç›®åœ°å…±äº«åŒä¸€ç‰ˆæœ¬çš„ä¾èµ–ã€‚æœ€ç»ˆæ‚¨èŠ‚çœäº†å¤§é‡ä¸é¡¹ç›®å’Œä¾èµ–æˆæ¯”ä¾‹çš„ç¡¬ç›˜ç©ºé—´ï¼Œå¹¶ä¸”æ‹¥æœ‰æ›´å¿«çš„å®‰è£…é€Ÿåº¦ï¼  
  â‘¡ åˆ›å»ºéæ‰å¹³åŒ–çš„ `node_modules` æ–‡ä»¶å¤¹  
  å½“ä½¿ç”¨ `npm` å®‰è£…ä¾èµ–æ—¶ï¼Œæ‰€æœ‰çš„ä¾èµ–éƒ½ä¼šè¢«æå‡åˆ°æ¨¡å—çš„æ ¹ç›®å½•ã€‚ å› æ­¤ï¼Œé¡¹ç›®å¯ä»¥è®¿é—®åˆ°æœªè¢«æ·»åŠ è¿› å½“å‰ é¡¹ç›®çš„ä¾èµ–ã€‚`pnpm` ä½¿ç”¨è½¯é“¾çš„æ–¹å¼å°†é¡¹ç›®çš„ç›´æ¥ä¾èµ–æ·»åŠ è¿›æ¨¡å—æ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ã€‚

- `pnpm` å¤©ç”Ÿæ”¯æŒ `monorepo`ï¼Œä¸ºä»€ä¹ˆå¹³å°ä¸é‡‡ç”¨è¿™ç§æ¨¡å¼å‘¢ï¼Ÿ  
  ç­”ï¼šæˆ‘ä»¬å…ˆæ¥ç®€å•ä»‹ç»ä¸€ä¸‹ä»€ä¹ˆæ˜¯ `monorepo` ï¼Œ`monorepos` æŒ‡å•ä¸€ä»£ç åº“ï¼Œåœ¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„å•ä¸ªä»£ç åº“é‡ŒåŒ…å«äº†è®¸å¤šé¡¹ç›®çš„ä»£ç ï¼Œä¸å®ƒå¯¹åº”çš„æ˜¯ `multirepos` å¤šä»£ç åº“ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½å‚¨å­˜åœ¨ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„ã€ç‰ˆæœ¬æ§åˆ¶çš„ä»£ç åº“ä¸­ã€‚`monorepo` å¯èƒ½å¹¶ä¸é€‚åˆå¤§å¤šæ•°é¡¹ç›®ï¼Œæ¯•ç«Ÿå¤§å®¶ä¹ æƒ¯äº†å¤šä»£ç åº“å¼€å‘ï¼Œæ‰€ä»¥å¹³å°ä¸é‡‡ç”¨è¿™ç§æ¨¡å¼ã€‚  
  [æ¨èæ–‡ç« :Monorepo å¯èƒ½æ²¡æ‚¨æƒ³è±¡ä¸­é‚£ä¹ˆé¦™](https://baijiahao.baidu.com/s?id=1663844045880515134&wfr=spider&for=pc)

## å¹³å°å‡ºç°æŠ¥é”™ `Cannot find module '@zougt/some-loader-utils'`

- ä¸ºä»€ä¹ˆä¼šå‡ºç° `Cannot find module '@zougt/some-loader-utils'`  
  ç­”ï¼šå¹³å°è·¯å¾„è¯·ä¸è¦ä½¿ç”¨ä¸­æ–‡å‘½åï¼ï¼ï¼ä¼šé€ æˆè§£æä¹±ç ï¼ï¼ï¼è¯·ä½¿ç”¨å…¨è‹±æ–‡è·¯å¾„ï¼ï¼ï¼

## å¹³å°å‡ºç°æŠ¥é”™ `Access is denied`ï¼ˆ`windows` å¸¸è§ï¼‰

![img](~@alias/img/guide/error1.png)

- è§£å†³åŠæ³•ï¼šè¯·éµå¾ªå¹³å°è¦æ±‚ï¼Œå®‰è£…å¯¹åº”çš„ `node` å’Œ `pnpm` ç‰ˆæœ¬ ( `node` 18.18.0 ç‰ˆæœ¬åŠä»¥ä¸Šã€`pnpm` 9 ç‰ˆæœ¬åŠä»¥ä¸Š)

## å®‰è£…ä¾èµ–æ—¶å‡ºç°æŠ¥é”™ `Cannot find module 'sass'`

![img](~@alias/img/guide/sass.png)

ç­”ï¼šåˆ é™¤å¹³å°çš„ `pnpm-lock.yaml` å’Œ `node_modules` ï¼Œé‡æ–°æ‰§è¡Œå‘½ä»¤ `pnpm install` å®‰è£…ä¾èµ–å³å¯ã€‚ï¼ˆé‡ç‚¹ï¼š`æ–‡ä»¶å­˜æ”¾è·¯å¾„ä¸è¦å¸¦æœ‰ä¸­æ–‡`ï¼‰

## åŠ¨æ€è·¯ç”±åˆ·æ–°å‡ºç°è­¦å‘Š âš ï¸

- ä¸ºä»€ä¹ˆä¼šå‡ºç°è­¦å‘Šï¼Ÿä¼šä¸ä¼šå½±å“ä½¿ç”¨ï¼Ÿ  
   ç­”ï¼šè¿™ä¸ªè­¦å‘Šæ˜¯ `vue-router` ä½œè€…æ•…æ„ç•™ä¸‹çš„ï¼Œå’±ä¹Ÿä¸çŸ¥é“ä¸ºå•¥ï¼Œè¯¦æƒ…çœ‹ [issues](https://github.com/vuejs/router/issues/521#issuecomment-706680593)ã€‚ä¸ä¼šå½±å“ä½¿ç”¨ï¼ŒåŠŸèƒ½ä¸€åˆ‡è¡¨ç°æ­£å¸¸ï¼Œå¹³å°æ‰“åŒ…éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå°±ä¸ä¼šå‡ºç°è­¦å‘Šäº†ã€‚
  å·²é€šè¿‡ [vite-plugin-router-warn](https://www.npmjs.com/package/vite-plugin-router-warn) è§£å†³ã€‚[ç‚¹å‡»æŸ¥çœ‹å…·ä½“è§£å†³ä»£ç ](https://github.com/pure-admin/vue-pure-admin/commit/b9e6556409a755655bf7f769ad1c340d33c66c59#commitcomment-134220309)

## å¹³å°å‡ºç°è­¦å‘Š `rank only the home page can be 0` âš ï¸

![img](~@alias/img/guide/rank.png)

ç­”ï¼šè·¯ç”± `meta` é‡Œçš„ `rank` å­—æ®µåªæœ‰ `home` è·¯ç”±æ‰èƒ½æ˜¯ `0` ï¼Œå…¶ä»–å‡ä¸èƒ½ä¸º `0` ã€‚ä½œä¸ºä¸€ç§è§„èŒƒï¼Œ`rank` å­—æ®µæœ€å¥½å”¯ä¸€ã€‚`rank` å­—æ®µä»£è¡¨èœå•çš„æ’åºï¼Œè€Œä¸”åªèƒ½æ˜¯é¡¶çº§èœå•è¿›è¡Œæ’åºï¼Œä¹Ÿå°±æ˜¯æœ€å¤–å±‚çš„èœå•ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡å‘¢ã€‚è¯¦è§[issues/154](https://github.com/pure-admin/vue-pure-admin/issues/154#issuecomment-996571156)ã€‚

## ä¸ºä»€ä¹ˆå¹³å°ä½¿ç”¨ `lodash-unified` ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ `lodash-es` å‘¢ï¼Ÿ

![img](~@alias/img/guide/lodash.png)

ç­”ï¼šå…¶å® `lodash-unified` åªæ˜¯å¯¹ `lodash-es` åšäº† `ESM` (ESModule)æ ¼å¼æ”¯æŒå¹¶å…¼å®¹ `CJS` (CommonJS)æ ¼å¼ï¼Œ`vite` åˆæ˜¯ä½¿ç”¨åŸç”Ÿ `ESM` æ–‡ä»¶å¿«é€Ÿå¯åŠ¨ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ `lodash-unified` å’Œ `lodash-es` éœ€è¦åŒæ—¶å®‰è£…ã€‚  
ç”¨æ³•ï¼š`import { sum } from "lodash-unified"` ç›®å‰å‡å·²è¢« [@pureadmin/utils](https://pure-admin-utils.netlify.app/) ä»£æ›¿ã€‚

## ä¸ºä»€ä¹ˆå¹³å°ä½¿ç”¨æ‰‹åŠ¨æŒ‰éœ€å¼•å…¥ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ `unplugin-vue-components` æ’ä»¶è‡ªåŠ¨æŒ‰éœ€å¼•å…¥å‘¢ï¼Ÿ

ç­”ï¼šæˆ‘å°è¯•å°† `unplugin-element-plus` æ›¿æ¢æˆ `unplugin-vue-components` ï¼Œä½†ä¼¼ä¹ `unplugin-vue-components` è¡¨ç°ä¸æ˜¯å¤ªå¥½ï¼Œæ•´ä½“æ¥è¯´æœ‰äº›é—®é¢˜ï¼Œå¯ä»¥çœ‹çœ‹ [unplugin-vue-components/issues](https://github.com/antfu/unplugin-vue-components/issues) äº†è§£ä¸€ä¸‹ï¼Œè€Œä¸” `unplugin-vue-components` ä¸æ˜¯ä¸º `element-plus` ç‰¹ä¾›çš„äº§ç‰©ï¼Œæ¯•ç«Ÿ `vite` ç­‰å·¥å…·è¿˜åœ¨é«˜é€Ÿå‘å±•ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€äº›è«åçš„é—®é¢˜å½±å“é¡¹ç›®ï¼Œæˆ‘ä¹‹å‰ç¢°åˆ°è¿‡å¼€å‘ç¯å¢ƒæ²¡äº‹ï¼Œæ‰“åŒ…å°±å‡‰äº†ï¼ˆè¿™é‡Œæ˜¯ vite æŸä¸ªç‰ˆæœ¬çš„é—®é¢˜ï¼‰ï¼Œè¿™å¾ˆå‘ï¼Œæ‰€ä»¥æˆ‘æ„Ÿè§‰æ‰‹åŠ¨æŒ‰éœ€å¼•å…¥æ›´æœ‰å®‰å…¨æ„Ÿï¼Œæ¯•ç«Ÿè¿­ä»£äº†è¿™ä¹ˆå¤šç‰ˆæœ¬ï¼Œ`unplugin-element-plus` æ²¡å‡ºè¿‡é—®é¢˜ã€‚æ‰€ä»¥æ•´ä½“æ¥è¯´å¹³å°éƒ½æŠŠå¾ˆå¤šå‘éƒ½è¸©è¿‡äº†ï¼Œæ¯•ç«Ÿæä¾›å¾ˆå¤šäººä½¿ç”¨ï¼Œå¹³å°åº”è¯¥æœ‰è¿™ä¸ªè´£ä»»åœ¨ä½¿ç”¨æœ€æ–°æŠ€æœ¯å‰è¿›è¡Œè°ƒç ”ï¼Œå¹¶åœ¨ç»¼åˆè€ƒè™‘ä¸‹ä¿ç•™ç›¸å¯¹ç¨³å®šçš„ä¸œè¥¿ï¼Œç»™å¹³å°å¸¦æ¥ç¨³å®šã€‚å½“ç„¶æ‚¨ä¹Ÿå¯è‡ªè¡Œæ›¿æ¢æˆ `unplugin-vue-components` æ’ä»¶è‡ªåŠ¨æŒ‰éœ€å¼•å…¥ã€‚

## ä¸ºä»€ä¹ˆå¹³å°é‡‡ç”¨å…¨å±€å¼•å…¥ `element-plus` ï¼Œè€Œä¸æ˜¯æŒ‰éœ€å¼•å…¥å‘¢ï¼Ÿ å…¨å±€å¼•å…¥å¸¦æ¥æ‰“åŒ…å†—ä½™ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ å¦‚ä½•æ”¹æˆæŒ‰éœ€å¼•å…¥ï¼Ÿ

- ä¸ºä»€ä¹ˆå¹³å°é‡‡ç”¨å…¨å±€å¼•å…¥ `element-plus` ï¼Œè€Œä¸æ˜¯æŒ‰éœ€å¼•å…¥å‘¢ï¼Ÿ  
  ç­”ï¼šâ‘  ç»è¿‡å¤šæ¬¡å®è·µï¼ŒæŒ‰éœ€å¼•å…¥ä¸€ä¸ªç»„ä»¶åº“çš„è¯ï¼Œ`vite` çš„é¢„ç¼–è¯‘çš„æ—¶é—´æœ‰ç‚¹é•¿ï¼ˆå°¤å…¶æ˜¯æ€§èƒ½ä½çš„ç”µè„‘æˆ–è€…æ‚¨å¼€äº†å¾ˆå¤šç¨‹åºå¯¼è‡´ `cpu` å ç”¨è¿‡é«˜ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨äº†å…¨å±€å¼•å…¥çš„æ–¹å¼ï¼Œä¸å†è®©å®ƒé¢„ç¼–è¯‘ï¼Œè€Œæ˜¯ç›´æ¥åŠ è½½æ•´ä¸ªåŒ…ã€‚â‘¡ æŒ‰éœ€å¼•å…¥ä¼šå‡ºç° `new dependencies optimized` çš„æƒ…å†µï¼Œè¿™ä¸ªæƒ…å†µä¸€æ—¦å‡ºç°å°±ä¼šä½¿å¾—é¡µé¢é‡æ–°åŠ è½½ï¼Œå¦‚ä¸‹å›¾ï¼Œå¼€å‘ä½“éªŒä¸å¥½ã€‚

![img](~@alias/img/guide/optimized.png)
ä¸Šå›¾çš„é—®é¢˜ï¼Œä¼°è®¡æ˜¯ `vite` è¿˜éœ€è¿›è¡Œä¼˜åŒ–ï¼Œä¸‹å›¾æ˜¯æ¥è‡ª `vite` å®˜æ–¹å¼€å‘è€…çš„å›å¤[issues](https://github.com/vitejs/vite/issues/7608#issuecomment-1087877492)
![img](~@alias/img/guide/vite.png)

- å…¨å±€å¼•å…¥å¸¦æ¥æ‰“åŒ…å†—ä½™ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ  
  ç­”ï¼šå…¨å±€å¼•å…¥ï¼Œæ‰“åŒ…ä¸ä¼šåœ¨è¿›è¡Œ `tree shanking` ï¼Œå¸¦æ¥æœªå¼•ç”¨çš„ä»£ç ä¹Ÿæ‰“åŒ…è¿›æ¥ï¼Œé€ æˆå†—ä½™é—®é¢˜ã€‚å¦‚ä½•è§£å†³å‘¢ã€‚ç›®å‰æ¥è¯´åªèƒ½åœ¨æ‰“åŒ…æ—¶ï¼Œå¹³å°æ”¹ç”¨ `unplugin-element-plus` æ’ä»¶æŒ‰éœ€å¼•å…¥æ¨¡å¼ï¼Œå¼€å‘æ—¶ï¼Œå†æ¢æˆå…¨å±€å¼•å…¥ã€‚

- å¦‚ä½•æ”¹æˆæŒ‰éœ€å¼•å…¥ï¼Ÿ  
  ç­”ï¼šä»¥ [ç²¾ç®€ç‰ˆ](https://github.com/pure-admin/pure-admin-thin) ä¸ºä¾‹ã€‚  
  â‘  å®‰è£… `unplugin-element-plus` ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š
  ```sh
    pnpm add unplugin-element-plus -D
  ```
  ![img](~@alias/img/ep/ep1.png)
  â‘¡ æ¥åˆ°æ ¹ç›®å½• `build/plugins.ts` æ–‡ä»¶ï¼Œå»æ‰ `import ElementPlus from "unplugin-element-plus/vite";` å’Œ `ElementPlus({}),` çš„ä»£ç æ³¨é‡Š  
  ![img](~@alias/img/ep/ep2.png)
  â‘¢ æ¥åˆ°æ ¹ç›®å½• `src/main.ts` æ–‡ä»¶ï¼Œæ³¨é‡Š `import ElementPlus from "element-plus";` ï¼Œæ·»åŠ  `import { useElementPlus } from "/@/plugins/element-plus";` ï¼Œå°† `use(ElementPlus)` æ›¿æ¢æˆ `use(useElementPlus)`
  ![img](~@alias/img/ep/ep3.png)
  â‘£ åƒä¸‡åˆ«å¿˜è®°ï¼ŒæŠŠç”¨åˆ°çš„ `element-plus` ç»„ä»¶å¼•å…¥åˆ°æ ¹ç›®å½• `src/plugins/element-plus/index.ts` æ–‡ä»¶ä¸­
  ![img](~@alias/img/ep/ep4.png)

## `vertical` æ¨¡å¼ä¸‹å·¦ä¾§èœå•å¡é¡¿ï¼Œå¦‚ä½•è§£å†³ï¼Ÿèœå•åˆ‡æ¢å¡é¡¿ï¼Ÿ

- `vertical` æ¨¡å¼ä¸‹å·¦ä¾§èœå•å¡é¡¿ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ  
  ç­”ï¼šè¿™ä¸ªé—®é¢˜å¤§å¤šæ•°å‡ºç°åœ¨ `windows` ä¸Šï¼Œç‰¹åˆ«æ˜¯ç”µè„‘æ€§èƒ½ä½æˆ–è€…åŒå±çš„æ¨¡å¼ä¸‹ã€‚æˆ‘çš„ç”µè„‘ä»æœªå‡ºç°è¿‡å¡é¡¿çš„æƒ…å†µã€‚ä¸‹å›¾æ˜¯æˆ‘çš„ç”µè„‘ä¿¡æ¯

![img](~@alias/img/guide/mac.png)

`element-plus` çš„ `menu` åœ¨ä¸Šè¿°çš„æƒ…å†µå¯èƒ½ä¼šå‡ºç°å¡é¡¿ã€‚

<!-- <video width="320" height="240" controls>
  <source :src="$withBase('/video/ep.mov')" type="video/mp4">
</video> -->

ä¸¤ç§è§£å†³åŠæ³•ï¼š

â‘  ä»è½¯ä»¶ä¸Šè§£å†³ï¼šæ¥åˆ° [public/platform-config.json](https://github.com/pure-admin/vue-pure-admin/blob/main/public/platform-config.json#L22) è®¾ç½® `MenuArrowIconNoTransition` ä¸º `true` å³å¯ä»¥è§£å†³ã€‚èœå•ç»è¿‡æµ‹è¯•åœ¨è°·æ­Œæµè§ˆå™¨ `92` åˆ° `94` ç‰ˆæœ¬æ˜¯ä¸å¡é¡¿çš„ï¼Œè°·æ­Œæµè§ˆå™¨ç‰ˆæœ¬ä¸‹è½½åœ°å€ [chromedownloads](https://www.chromedownloads.net/chrome64osx/)ï¼Œå¡é¡¿æ˜¯è¿™ä¸ª [transform: rotateZ(180deg)](https://github.com/element-plus/element-plus/blob/dev/packages/components/menu/src/sub-menu.ts#L320) é€ æˆçš„ï¼Œè²Œä¼¼æ˜¯è°·æ­Œçš„ [bug](https://bugs.chromium.org/p/chromium/issues/detail?id=1384444) å§  
â‘¡ ä»ç¡¬ä»¶ä¸Šè§£å†³ï¼šè¿è¡Œ window + x æ‰“å¼€è®¡ç®—æœºç®¡ç†ç•Œé¢ï¼Œæ‰¾åˆ°è®¾å¤‡ç®¡ç†å™¨(æˆ–è€…è‹±æ–‡ Device Manager)ï¼Œæ‰“å¼€æ˜¾ç¤ºé€‚é…å™¨(æˆ–è€…è‹±æ–‡ Display Adapters)ï¼Œå¦‚æœåˆ—è¡¨å†…å±•ç¤ºçš„æœ‰ Inter(R) HD Graphicsï¼Œåˆ™è¯´æ˜æ­¤ç”µè„‘å…·æœ‰é›†æˆæ˜¾å¡ï¼Œç¦ç”¨æ‰æ­¤é¡¹ï¼ˆé›†æˆæ˜¾å¡ï¼‰ï¼Œå°†ç‹¬ç«‹æ˜¾å¡å¼€å¯æ»¡è½½çŠ¶æ€ã€‚[Windows æ€ä¹ˆç¦ç”¨é›†æˆæ˜¾å¡](https://jingyan.baidu.com/article/fd8044fae944b61131137ab1.html)

- èœå•åˆ‡æ¢å¡é¡¿ï¼Ÿ  
  ç­”ï¼šæœ‰äººé—®å¹³å°æ¼”ç¤ºç¯å¢ƒèœå•åˆ‡æ¢å¡é¡¿ï¼Œæ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ  
  â‘  é¦–å…ˆï¼Œå¹³å°çš„æ¼”ç¤ºç¯å¢ƒä½¿ç”¨çš„æ˜¯ [github](https://github.com/) ï¼Œä¸€ä¸ªå…è´¹çš„é™æ€ç½‘ç«™éƒ¨ç½²æœåŠ¡ï¼Œåˆ‡æ¢èœå•çš„æ—¶å€™ï¼Œéœ€è¦åŠ è½½ç½‘ç»œèµ„æºï¼Œèµ°äº†è¯·æ±‚ï¼Œå“åº”è¶Šæ…¢ï¼Œé¡µé¢æ˜¾ç¤ºçš„è¶Šæ…¢ã€‚  
  â‘¡ å…¶æ¬¡ï¼Œæœ¬åœ°è¿è¡Œå¹³å°çš„å®Œæ•´ç‰ˆï¼Œæœ‰çš„èœå•åˆ‡æ¢å¡é¡¿ï¼Œå› ä¸ºä¹Ÿè¦åŠ è½½èµ„æºå•Šï¼Œæ¯”å¦‚åœ°å›¾ä»€ä¹ˆçš„ï¼Œå½“å‰é¡µé¢åŠ è½½èµ„æºè¶Šå¤§ï¼Œæ­£å¸¸æƒ…å†µä¸‹å“åº”å°±è¶Šæ…¢ï¼Œè¿™æ˜¯æœ€åŸºæœ¬çš„çŸ¥è¯†å“¦ã€‚

## æµè§ˆå™¨æ§åˆ¶å°æ‰“å°ä¸€äº›é‡å¤ä¿¡æ¯ï¼Œå¾ˆå½±å“å¼€å‘ä½“éªŒï¼Œå¦‚ä½•è§£å†³ï¼Ÿ

![img](~@alias/img/guide/log.png)

ç­”ï¼šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè§¦å‘äº† `vite` çš„ `hmr update` å°±ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºç›¸å¯¹åº”çš„ä¿¡æ¯ [issues](https://github.com/vitejs/vite/issues/1785) ï¼Œæœ‰æ—¶å€™è¾“å‡ºçš„ä¿¡æ¯å¯¹äºæˆ‘ä»¬æ¥è¯´å¹¶æ²¡æœ‰ç”¨ï¼Œæ˜¯å¦å¯ä»¥å±è”½æ‰è¿™äº›ä¿¡æ¯å‘¢ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œåœ¨æµè§ˆå™¨æ§åˆ¶å°è¿‡æ»¤æ¡†ä¸­è¾“å…¥æ‚¨ä¸éœ€è¦çš„ä¿¡æ¯å¹¶åœ¨æœ€å‰é¢åŠ ä¸Š `-` å³å¯ã€‚[æµè§ˆå™¨æ§åˆ¶å°è¿‡æ»¤æ— ç”¨çš„æç¤ºå’ŒæŠ¥é”™](https://blog.csdn.net/qq_33674300/article/details/114764718) <Badge text="æ¨èæ–‡ç« "/>

![img](~@alias/img/guide/hotlog.png)

## `vue3` çš„ `<script setup>` å†™æ³•ï¼Œè™½ç„¶ä¼šä¾æ®å®ƒçš„æ–‡ä»¶åæ¥è‡ªåŠ¨æ¨æ–­ç»„ä»¶åç§° `name`ï¼Œä½†è¿™ä¹Ÿçº¦æŸäº†æˆ‘ä»¬çš„å†™æ³•ï¼Œä¸ç®—çµæ´»ï¼Œæœ‰æ²¡æœ‰è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿ

ç­”ï¼šæœ‰çš„ã€‚æœ‰äººåœ¨ vue ä¸Šæäº†è¿™ä¸ª issuesï¼š`use <script setup name="cpnName"> instead of two <script>`ï¼Œè¿™ç§å†™æ³•æ— ç–‘æ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œä½†æ˜¯è¢«å°¤å¤§å¦å†³äº†ï¼Œå…·ä½“å¯çœ‹ [issues](https://github.com/vuejs/core/issues/5218)ï¼Œä¸è¿‡å‘¨è¾¹ç”Ÿæ€å‡ºäº†ä¸ªæ’ä»¶ [unplugin-vue-define-options](https://www.npmjs.com/package/unplugin-vue-define-options) å¯ä»¥åœ¨ä¸€ä¸ª `setup` é‡ŒåŠ å…¥ `name` ï¼Œå¾ˆæ–¹ä¾¿ã€‚ç”¨æ³•å¦‚ä¸‹

```sh
<script setup lang="ts">
defineOptions({
  name: "é¡µé¢åç§°"
});
</script>
```

ç›®å‰`vue`å®˜æ–¹å·²æ”¯æŒ [defineOptions](https://cn.vuejs.org/api/sfc-script-setup.html#defineoptions)

## `vue3` å•æ–‡ä»¶æ”¯æŒå¤šä¸ªæ ¹æ ‡ç­¾ï¼Œä½†æ˜¯å¹³å°ä¸ºä»€ä¹ˆä¸èƒ½è¿™ä¹ˆç”¨å‘¢ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ

- å¹³å°ä¸ºä»€ä¹ˆä¸èƒ½è¿™ä¹ˆç”¨å‘¢ï¼Ÿ  
  ç­”ï¼šå› ä¸ºå¹³å°ç”¨äº† `vue3` ä¸­ `Transition` ç»„ä»¶åŒ…è£¹æ•´ä¸ªå†…å®¹åŒºï¼Œè¿™æ ·æ‰èƒ½å¸¦æ¥å„ç§é¡µé¢åˆ‡æ¢æ•ˆæœã€‚ä½†æ˜¯ `Transition` ä»…æ”¯æŒå•ä¸ªå…ƒç´ æˆ–ç»„ä»¶ä½œä¸ºå…¶æ’æ§½å†…å®¹ã€‚å¦‚æœå†…å®¹æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œåˆ™è¯¥ç»„ä»¶ä¹Ÿå¿…é¡»åªæœ‰ä¸€ä¸ªæ ¹å…ƒç´ ï¼Œæ‰€ä»¥è¿™æ‰è¦æ±‚å†…å®¹åŒºé‡Œçš„å•æ–‡ä»¶è¦åœ¨æœ€å¤–å±‚åŠ ä¸Šä¸€ä¸ªæ ¹å…ƒç´ ï¼Œè¯¦æƒ…çœ‹ [TIP](https://cn.vuejs.org/guide/built-ins/transition.html#the-transition-component) <Badge text="vue3æ–‡æ¡£"/>

- å¦‚ä½•è§£å†³ï¼Ÿ  
  ç­”ï¼šå¦‚æœæƒ³å†…å®¹åŒºçš„å•æ–‡ä»¶æ”¯æŒå¤šä¸ªæ ¹å…ƒç´ ï¼Œå¯ä»¥æ¥åˆ°è¿™é‡Œ [lay-content/index.vue](https://github.com/pure-admin/vue-pure-admin/blob/main/src/layout/components/lay-content/index.vue#L77) å°† `Transition` ç›¸å…³åœ°æ–¹åˆ é™¤ï¼Œä¸åœ¨è¦é¡µé¢å†…å®¹è¿‡æ¸¡æ•ˆæœäº†ã€‚

## ä¸åŒé¡¹ç›®çš„æœ¬åœ°å­˜å‚¨è®¾ç½®å¯èƒ½ä¸åŒï¼ˆé¡µé¢æ•ˆæœä¸åŒï¼‰ï¼Œé‚£ä¹ˆå¦‚ä½•é¿å… `fork` é¡¹ç›®çš„æœ¬åœ°å­˜å‚¨ `key` å€¼ä¸€æ ·å‘¢ï¼Ÿ

- å¹³å°ä½¿ç”¨çš„ [å“åº”å¼æœ¬åœ°å­˜å‚¨](https://github.com/xiaoxian521/responsive-storage)ï¼Œé»˜è®¤çš„ `key` å…¨éƒ¨ä»¥ `responsive-` å¼€å¤´ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º

![img](~@alias/img/guide/namespace.jpg)

- å¦‚ä½•é¿å…ï¼Ÿ  
  ç­”ï¼šå¯ä»¥åœ¨ [æ­¤å¤„](https://github.com/pure-admin/vue-pure-admin/blob/main/public/platform-config.json#L25) ä¿®æ”¹ `ResponsiveStorageNameSpace` ä¸ºæ‚¨æ‰€éœ€çš„å‘½åç©ºé—´å³å¯

## å¹³å°è¦æ±‚ `node` ç‰ˆæœ¬åº”ä¸å°äº `18.18.0` ã€`pnpm` ç‰ˆæœ¬åº”ä¸å°äº `9` ï¼Œä½†æ˜¯å®é™…å¼€å‘æœ‰çš„é¡¹ç›®éœ€è¦æ¯”è¿™äº›ä½çš„ç‰ˆæœ¬æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ

ç­”ï¼šæ¨èé˜…è¯» [ä¸‰æ¬¾éå¸¸å®ç”¨çš„ Node.js ç‰ˆæœ¬ç®¡ç†å·¥å…·](https://blog.csdn.net/qq_36380426/article/details/126218495)

## æ‰“åŒ…æ—¶æŠ¥ `Unexpected token`ï¼Œå¦‚ä¸‹å›¾ï¼ˆæ¥è‡ªç¾¤å‹æä¾›ï¼‰

![img](~@alias/img/guide/unexpected.jpg)

é¦–å…ˆè¯·æ‚¨ `ä¸è¦` ç”¨ `ä¸­æ–‡è·¯å¾„å`ï¼Œç„¶åæˆ‘ä»¬æ¥è§£ç­”ä¸€ä¸‹

ç­”ï¼šè¿™é‡ŒæŠ¥é”™æ¥è‡ªäº [vite-plugin-remove-console](https://github.com/xiaoxian521/vite-plugin-remove-console)ï¼Œå½“ `console.log` å†™æ³•ä¸è§„èŒƒæˆ–è€…è¿™ä¸ªæ–‡ä»¶æ˜¯å‹ç¼©æ ¼å¼æ—¶å°±ä¼šå‡ºç°è¿™ç§æŠ¥é”™ï¼Œè¯·åœ¨ `external` ä¸­æ’é™¤è¿™ä¸ª `console.log` å‡ºç°çš„æ–‡ä»¶ï¼Œå‚è€ƒ [removeConsole](https://github.com/pure-admin/vue-pure-admin/blob/main/build/plugins.ts#L56)

## å®‰è£…ä¾èµ–æ…¢ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ

å¯èƒ½æ‚¨åˆšæ¥è§¦åˆ° `pure-admin` ä¼šæœ‰ä¸ªç–‘é—®ï¼Œä¸ºä»€ä¹ˆå¹³å°ä½¿ç”¨äº† `pnpm` å¯æ˜¯å®‰è£…å¹³å°ä¾èµ–çš„æ—¶å€™è¿˜æ˜¯ç­‰äº†å¾ˆé•¿æ—¶é—´å‘¢ï¼Ÿ

ç­”ï¼šé¦–å…ˆæˆ‘è§‰å¾—æ‚¨å¯ä»¥è®¤çœŸçœ‹ä¸‹ [pnpm](/pages/FAQ/#ä¸ºä»€ä¹ˆä½¿ç”¨-pnpm-pnpm-å¤©ç”Ÿæ”¯æŒ-monorepo-ä¸ºä»€ä¹ˆå¹³å°ä¸é‡‡ç”¨è¿™ç§æ¨¡å¼å‘¢-å¯ä»¥ä¸ä½¿ç”¨-pnpm-å—-å¦‚ä½•ä»-pnpm-åˆ‡æ¢åˆ°-yarn) å“¦ã€‚å…¶æ¬¡ï¼Œ`pnpm` åªä¼šåœ¨é¡¹ç›®ä¾èµ–åŒ…ä»æœ¬åœ°æ‰¾ä¸åˆ°å¯¹åº”ç‰ˆæœ¬çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šå» [npm](https://www.npmjs.com/) ä¸‹è½½ï¼Œæ—¢ç„¶æ˜¯ `npm` ä¸‹è½½çš„è¯ï¼Œå®ƒè‚¯å®šæ˜¯å›½å¤–é•œåƒï¼Œä¸‹è½½æ…¢å°±å¾ˆæ­£å¸¸äº†ã€‚ä¸‹é¢è®²ä¸‹è§£å†³åŠæ³•ï¼š

â‘  ä½¿ç”¨ä¸‹é¢å‘½ä»¤æŸ¥çœ‹å½“å‰ `npm` æº

```
npm config ls
```

æ‰§è¡Œå®Œä¸Šé¢çš„å‘½ä»¤åï¼Œåœ¨æ‚¨æ²¡æœ‰è®¾ç½®è¿‡ä»»ä½•æºçš„æƒ…å†µä¸‹ï¼Œé»˜è®¤æ˜¯ [npmjs](https://www.npmjs.com/) å®˜æ–¹æºï¼Œå¦‚ä¸‹å›¾

![img](~@alias/img/guide/npm1.jpg)

â‘¡ ä¸ç®¡æ˜¯ä»€ä¹ˆæºï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä¸ç”¨ç®¡ï¼Œç›´æ¥æ‰§è¡Œä¸‹é¢å‘½ä»¤å³å¯

```
npm config set registry https://registry.npmmirror.com
```

ä¸Šé¢çš„å‘½ä»¤æ˜¯å°†æœ¬åœ°çš„æºæ¢æˆå›½å†…æº [npmmirror](https://npmmirror.com/)ï¼Œç»è¿‡å‡ è½®æµ‹è¯•ï¼Œå‘ç°å®ƒçš„ä¸‹è½½é€Ÿåº¦å¿«ä¸”åŒæ­¥ç‡é«˜ï¼ŒåŒæ­¥é¢‘ç‡ `10` åˆ†é’Ÿä¸€æ¬¡ï¼Œå¦‚æœæ‚¨ä¹‹å‰çš„æºæ˜¯è¿™ä¸ª `http://registry.npm.taobao.org` ï¼Œé‚£æ‚¨å¿…é¡»æ¢æˆ `npmmirror` å•¦ï¼Œå› ä¸ºåŸæ·˜å® `npm` åŸŸåå³å°†åœæ­¢è§£æ [å…·ä½“äº†è§£](https://zhuanlan.zhihu.com/p/465424728?spm=a2c6h.24755359.0.0.6d444dccAL1K1J)  
æ‰§è¡Œå®Œä¸Šé¢çš„å‘½ä»¤åå†ä½¿ç”¨ `â‘ ` ä¸­çš„å‘½ä»¤æŸ¥çœ‹æœ¬åœ°æºï¼Œå¦‚ä¸‹å›¾

![img](~@alias/img/guide/npm2.jpg)

â‘¢ å½“æˆ‘ä»¬å°†æœ¬åœ°æºæ¢æˆ `npmmirror` åï¼Œå†å›åˆ° `pure-admin` å¹³å°ï¼Œå°† `pnpm-lock.yaml` å’Œ `node_modules` è¿™ä¸¤ä¸ªæ–‡ä»¶åˆ é™¤ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤é‡æ–°å®‰è£…ä¾èµ–ï¼Œæ‚¨å°±ä¼šå‘ç°å®‰è£…é€Ÿåº¦å¾ˆå¿«å•¦

```
pnpm install
```

å¦‚æœæ‚¨ä¸åˆ é™¤ä¸Šé¢æåˆ°çš„ä¸¤ä¸ªæ–‡ä»¶å°±ä¼šé‡åˆ°å¦‚ä¸‹å›¾çš„æŠ¥é”™

![img](~@alias/img/guide/npm3.jpg)

:::tip
å¦‚æœæ‚¨æœ¬åœ°æœ‰è‡ªå·±ç»´æŠ¤çš„ `npm` åŒ…ï¼Œè¯·åœ¨å‘åŒ…å‰ä½¿ç”¨ä¸‹é¢å‘½ä»¤å°†æœ¬åœ°æºæ¢æˆ `npm` å®˜æ–¹æºï¼Œè¿™æ ·æ‰èƒ½ä¿è¯æ‚¨å‘åŒ…æˆåŠŸï¼Œå‘å®Œä¹‹åå†æ¢æˆ `npmmirror` æºå³å¯ã€‚åŒç†ï¼Œå¦‚ä½•æ‚¨å…¬å¸æœ‰ç§æœçš„è¯ï¼Œä¹Ÿæ˜¯å¦‚æ­¤æ“ä½œï¼Œåªä¸è¿‡æŠŠä¸‹é¢å‘½ä»¤ `registry` åçš„åœ°å€æ¢æˆç§æœçš„åœ°å€å³å¯ã€‚å¦‚ä½•éƒ¨ç½²ç§æœå¯å‚è€ƒ [è¯¥æ–‡ç« ](https://www.cnblogs.com/venblogs/p/14371381.html)

```
npm config set registry https://registry.npmjs.org
```

å½“ç„¶ç¬¬äºŒç§åŠæ³•ä¹Ÿæ˜¯æœ€æ–¹ä¾¿çš„åŠæ³•å°±æ˜¯å°†ä¸‹é¢ä»£ç åŠ å…¥åˆ°æ‚¨è‡ªå·±åº“çš„ `package.json` é‡Œ [æŸ¥çœ‹å…·ä½“å‚è€ƒ](https://github.com/pure-admin/pure-admin-table/blob/main/package.json#L24-L26)

```JSON
"publishConfig": {
  "registry": "https://registry.npmjs.org/"
}
```

:::

## å®‰è£… `vue` çš„æŸäº›ç‰ˆæœ¬ï¼Œé¡µé¢å¡é¡¿æ˜æ˜¾ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ

ç­”ï¼š`vue v3.2.41` åŠä»¥ä¸Šç‰ˆæœ¬å’Œ `Vue.js devtools v6.4.5` ä¸¤è€…ä¸€èµ·ä½¿ç”¨ï¼Œé¡µé¢å¡é¡¿æ˜æ˜¾ï¼Œå°¤å…¶å½“é¡µé¢å…ƒç´ å¤šä»¥åŠåŒä¸€æ—¶åˆ»æ“ä½œè¾ƒå¤šå…ƒç´ æ˜¯æœ€ä¸ºæ˜æ˜¾ã€‚è§£å†³åŠæ³•ï¼šå¸è½½ `Vue.js devtools` è¿™æ¬¾æµè§ˆå™¨æ’ä»¶ï¼Œå¸è½½åï¼Œé¡µé¢æ¯”ä¹‹å‰æ“ä½œè¿˜æµç•… ğŸ¶ã€‚è¿™è¶³ä»¥çœ‹å‡º `Vue.js devtools` å½±å“è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œå¯ä»¥å°è¯•ä¸ä¾èµ– `Vue.js devtools`ï¼Œæˆ‘è¿™äº›å¹´ç”¨ `vue` åŸºæœ¬ä¸ç”¨ `Vue.js devtools`ï¼Œæ¯•ç«Ÿæµè§ˆå™¨çš„æ–­ç‚¹è°ƒè¯•è¶³å¤Ÿäº†ï¼Œå½“ç„¶è¿™ä¹Ÿå¯ä»¥é”»ç‚¼æ‚¨çš„æ€ç»´èƒ½åŠ›

## å¹³å°å‡ºç°æŠ¥é”™ `global is not defined`

ç­”ï¼šå¯èƒ½æ˜¯æ‚¨å¼•å…¥æŸä¸ªåº“çš„é—®é¢˜ï¼Œæ¯”å¦‚ [aws-sdk-js](https://github.com/aws/aws-sdk-js)ï¼Œè§£å†³åŠæ³•å°±æ˜¯å°† [src/utils/globalPolyfills.ts](https://github.com/pure-admin/vue-pure-admin/blob/main/src/utils/globalPolyfills.ts) å¼•å…¥ [src/main.ts](https://github.com/pure-admin/vue-pure-admin/blob/main/src/main.ts)

## å¹³å°å¦‚ä½•ç½®ç°å¹¶ä¸”ä¸å½±å“æ“ä½œï¼Ÿ

::: details å±•å¼€æŸ¥çœ‹å®ç°ä»£ç 

![img](~@alias/img/guide/grey.jpg)

```
* { filter: grayscale(100%); }

import { toggleClass } from "@pureadmin/utils";

beforeCreate() {
  toggleClass(true, "html-grey", document.querySelector("html"));
},
```

:::

## å¹³å°åœ¨ä½¿ç”¨ `element-plus` çš„ `el-dialog`ã€`el-drawer`ã€`el-message-box`ã€`el-notification` è¿™å››ä¸ªç»„ä»¶æ—¶ï¼Œå³ä¸Šè§’å…³é—­å›¾æ ‡çš„æ ·å¼è·Ÿ `element-plus` æœ¬èº«è¡¨ç°ä¸ä¸€è‡´ï¼Ÿ

ç­”ï¼šåœ¨å¹³å° `3.9.2` ç‰ˆæœ¬ï¼Œæˆ‘æŠŠæ ·å¼è¦†ç›–äº†ï¼Œä½¿å…¶è¡¨ç°æ›´é²œæ˜ï¼ˆç»†å¿ƒçš„å°ä¼™ä¼´ä¼šå‘ç° `vscode` å¥½å¤šæ“ä½œé¼ æ ‡è¦†ç›–ä¸Šå»ä¹Ÿæ˜¯è¿™ç§æ ·å¼é£æ ¼ ğŸ¤—ï¸ï¼‰ï¼Œå…·ä½“ä»£ç ä¿®æ”¹ä½ç½® [ç¬¬ä¸€å¤„](https://github.com/pure-admin/vue-pure-admin/commit/c80818d792276666aaea4b18413a0f08777f2ed1#diff-65a69f4a70b50de99604a7cae0784ee0e63a22f5d3addc384d50f76bbba1a2c2)ã€[ç¬¬äºŒå¤„](https://github.com/pure-admin/vue-pure-admin/commit/c80818d792276666aaea4b18413a0f08777f2ed1#diff-6e577e4119a687e405cdbfac69a8fa06cbcc3b80eeca1d3766d936961de4f3a5)ï¼Œå¦‚æœæƒ³ä¿æŒä¸€è‡´åˆ é™¤å¯¹åº”æ”¹åŠ¨å¤„å³å¯

::: details å±•å¼€æŸ¥çœ‹å¹³å°å½“å‰è¿™å››ä¸ªç»„ä»¶å³ä¸Šè§’å…³é—­å›¾æ ‡çš„æ ·å¼

![img](~@alias/img/ep/dialog.jpg)
![img](~@alias/img/ep/dialog-dark.jpg)

![img](~@alias/img/ep/drawer.jpg)
![img](~@alias/img/ep/drawer-dark.jpg)

![img](~@alias/img/ep/messagebox.jpg)
![img](~@alias/img/ep/messagebox-dark.jpg)

![img](~@alias/img/ep/notification.jpg)
![img](~@alias/img/ep/notification-dark.jpg)

:::

## å¹³å°åœ¨ `v3.9.4` ç‰ˆæœ¬å®Œå…¨ç§»é™¤äº† `vxe-table`ï¼Œä¸ºä»€ä¹ˆç§»é™¤ï¼Ÿå¦‚ä½•è‡ªè¡Œé›†æˆï¼Ÿ

- ä¸ºä»€ä¹ˆç§»é™¤ï¼Ÿ

ç­”ï¼š[è¯·ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹åŸå› ](https://github.com/pure-admin/vue-pure-admin/issues/392)

- å¦‚ä½•è‡ªè¡Œé›†æˆï¼Ÿ

::: details

1. å®‰è£… `vxe-table`ã€`xe-utils`

```
pnpm add vxe-table xe-utils
```

2. å°† `vxe-table` å’Œ `xe-utils` åŠ å…¥ `build/optimize.ts` æ–‡ä»¶çš„ `include` é‡Œ

3. å®‰è£… `font-awesome`

```
pnpm add font-awesome -D
```

4. åœ¨ `src/layout/index.vue` æ–‡ä»¶çš„ `<script setup lang="ts"></script>` å¼•å…¥ `font-awesome`ï¼Œå¦‚ä¸‹

```Vue
<script setup lang="ts">
// vxe-tableçš„æ‰€æœ‰iconä¸æ”¯æŒcomponentæ¨¡å¼ï¼Œé—´æ¥ä¾èµ–äº†font-awesome
import "font-awesome/css/font-awesome.min.css";
</script>
```

5. å°†ä¸‹é¢æ ·å¼åŠ å…¥ `src/style/index.scss` æ–‡ä»¶

```Css
/* é‡ç½® vxe-table æ ·å¼ */
.vxe-button.type--button.theme--primary:hover,
.vxe-pager .vxe-pager--num-btn:not(.is--disabled).is--active {
  color: #fff !important;
}
```

6. å°†ä¸‹é¢æ ·å¼åŠ å…¥ `src/style/dark.scss` æ–‡ä»¶

```Css
/* vxe-table æš—é»‘æ¨¡å¼é€‚é… */
.vxe-table--header-wrapper,
.vxe-table--body-wrapper {
  color: var(--el-text-color-primary);
  background: var(--el-bg-color) !important;
}

.vxe-table--render-default.border--full .vxe-header--column,
.vxe-table--render-default.border--full .vxe-body--column,
.vxe-table--render-default.border--full .vxe-footer--column {
  background-image: linear-gradient(
      var(--el-border-color-lighter),
      var(--el-border-color-lighter)
    ),
    linear-gradient(
      var(--el-border-color-lighter),
      var(--el-border-color-lighter)
    );
}

/* è¡¨å¤´ */
.vxe-table--header-wrapper {
  background: #262727 !important;
}

.vxe-table--render-wrapper,
.vxe-table--main-wrapper {
  border: none;
}

.vxe-pager.is--perfect,
.vxe-table--render-default .vxe-table--border-line {
  border: 1px solid var(--el-border-color-lighter);
}

.vxe-table--header-border-line {
  border-bottom: 1px solid var(--el-border-color-lighter) !important;
}

.vxe-body--row.row--hover,
.vxe-pager {
  background-color: #262727;
}

.vxe-input--inner,
.vxe-pager .vxe-pager--jump-prev,
.vxe-pager .vxe-pager--prev-btn,
.vxe-pager .vxe-pager--next-btn,
.vxe-pager .vxe-pager--jump-next,
.vxe-pager .vxe-pager--num-btn,
.vxe-pager .vxe-pager--jump .vxe-pager--goto {
  background-color: transparent;
  color: var(--el-text-color-primary);
  // outline: none !important;
}

.vxe-select-option--wrapper {
  background: var(--el-bg-color) !important;
}

.vxe-select-option:not(.is--disabled).is--hover {
  background: var(--el-color-primary-light-6) !important;
}

.vxe-modal--wrapper.type--modal .vxe-modal--box,
.vxe-modal--wrapper.type--alert .vxe-modal--box,
.vxe-modal--wrapper.type--confirm .vxe-modal--box,
.vxe-form {
  background: var(--el-bg-color) !important;
}

.vxe-modal--box,
.vxe-modal--header {
  border: none;
  background: var(--el-bg-color) !important;
}

.vxe-modal--title,
.vxe-button--content,
.vxe-modal--header-title {
  color: var(--el-text-color-primary);
}

.vxe-button.type--button:hover {
  background: var(--el-color-primary) !important;
}

.vxe-button {
  background-color: transparent;
}
```

7. ä½¿ç”¨ä¸‹é¢ä»£ç ç›´æ¥æ›¿æ¢ `src/layout/theme/index.ts` é‡Œçš„æ‰€æœ‰ä»£ç 

```Ts
/**
 * @description âš ï¸ï¼šæ­¤æ–‡ä»¶ä»…ä¾›ä¸»é¢˜æ’ä»¶ä½¿ç”¨ï¼Œè¯·ä¸è¦åœ¨æ­¤æ–‡ä»¶ä¸­å¯¼å‡ºåˆ«çš„å·¥å…·å‡½æ•°ï¼ˆä»…åœ¨é¡µé¢åŠ è½½å‰è¿è¡Œï¼‰
 */

import { EpThemeColor } from "../../../public/platform-config.json";

type MultipleScopeVarsItem = {
  scopeName: string;
  varsContent: string;
};

/** å°†vxeé»˜è®¤ä¸»é¢˜è‰²å’Œepé»˜è®¤ä¸»é¢˜è‰²ä¿æŒä¸€è‡´ */
const vxeColor = EpThemeColor;
/** é¢„è®¾ä¸»é¢˜è‰² */
const themeColors = {
  default: {
    vxeColor,
    subMenuActiveText: "#fff",
    menuBg: "#001529",
    menuHover: "#4091f7",
    subMenuBg: "#0f0303",
    subMenuActiveBg: "#4091f7",
    menuText: "rgb(254 254 254 / 65%)",
    sidebarLogo: "#002140",
    menuTitleHover: "#fff",
    menuActiveBefore: "#4091f7"
  },
  light: {
    vxeColor,
    subMenuActiveText: "#409eff",
    menuBg: "#fff",
    menuHover: "#e0ebf6",
    subMenuBg: "#fff",
    subMenuActiveBg: "#e0ebf6",
    menuText: "#7a80b4",
    sidebarLogo: "#fff",
    menuTitleHover: "#000",
    menuActiveBefore: "#4091f7"
  },
  dusk: {
    vxeColor: "#f5222d",
    subMenuActiveText: "#fff",
    menuBg: "#2a0608",
    menuHover: "#e13c39",
    subMenuBg: "#000",
    subMenuActiveBg: "#e13c39",
    menuText: "rgb(254 254 254 / 65.1%)",
    sidebarLogo: "#42090c",
    menuTitleHover: "#fff",
    menuActiveBefore: "#e13c39"
  },
  volcano: {
    vxeColor: "#fa541c",
    subMenuActiveText: "#fff",
    menuBg: "#2b0e05",
    menuHover: "#e85f33",
    subMenuBg: "#0f0603",
    subMenuActiveBg: "#e85f33",
    menuText: "rgb(254 254 254 / 65%)",
    sidebarLogo: "#441708",
    menuTitleHover: "#fff",
    menuActiveBefore: "#e85f33"
  },
  yellow: {
    vxeColor: "#fadb14",
    subMenuActiveText: "#d25f00",
    menuBg: "#2b2503",
    menuHover: "#f6da4d",
    subMenuBg: "#0f0603",
    subMenuActiveBg: "#f6da4d",
    menuText: "rgb(254 254 254 / 65%)",
    sidebarLogo: "#443b05",
    menuTitleHover: "#fff",
    menuActiveBefore: "#f6da4d"
  },
  mingQing: {
    vxeColor: "#13c2c2",
    subMenuActiveText: "#fff",
    menuBg: "#032121",
    menuHover: "#59bfc1",
    subMenuBg: "#000",
    subMenuActiveBg: "#59bfc1",
    menuText: "#7a80b4",
    sidebarLogo: "#053434",
    menuTitleHover: "#fff",
    menuActiveBefore: "#59bfc1"
  },
  auroraGreen: {
    vxeColor: "#52c41a",
    subMenuActiveText: "#fff",
    menuBg: "#0b1e15",
    menuHover: "#60ac80",
    subMenuBg: "#000",
    subMenuActiveBg: "#60ac80",
    menuText: "#7a80b4",
    sidebarLogo: "#112f21",
    menuTitleHover: "#fff",
    menuActiveBefore: "#60ac80"
  },
  pink: {
    vxeColor: "#eb2f96",
    subMenuActiveText: "#fff",
    menuBg: "#28081a",
    menuHover: "#d84493",
    subMenuBg: "#000",
    subMenuActiveBg: "#d84493",
    menuText: "#7a80b4",
    sidebarLogo: "#3f0d29",
    menuTitleHover: "#fff",
    menuActiveBefore: "#d84493"
  },
  saucePurple: {
    vxeColor: "#722ed1",
    subMenuActiveText: "#fff",
    menuBg: "#130824",
    menuHover: "#693ac9",
    subMenuBg: "#000",
    subMenuActiveBg: "#693ac9",
    menuText: "#7a80b4",
    sidebarLogo: "#1f0c38",
    menuTitleHover: "#fff",
    menuActiveBefore: "#693ac9"
  }
};

/**
 * @description å°†é¢„è®¾ä¸»é¢˜è‰²å¤„ç†æˆä¸»é¢˜æ’ä»¶æ‰€éœ€æ ¼å¼
 */
export const genScssMultipleScopeVars = (): MultipleScopeVarsItem[] => {
  const result = [] as MultipleScopeVarsItem[];
  Object.keys(themeColors).forEach(key => {
    result.push({
      scopeName: `layout-theme-${key}`,
      varsContent: `
        $vxe-primary-color: ${themeColors[key].vxeColor} !default;
        $subMenuActiveText: ${themeColors[key].subMenuActiveText} !default;
        $menuBg: ${themeColors[key].menuBg} !default;
        $menuHover: ${themeColors[key].menuHover} !default;
        $subMenuBg: ${themeColors[key].subMenuBg} !default;
        $subMenuActiveBg: ${themeColors[key].subMenuActiveBg} !default;
        $menuText: ${themeColors[key].menuText} !default;
        $sidebarLogo: ${themeColors[key].sidebarLogo} !default;
        $menuTitleHover: ${themeColors[key].menuTitleHover} !default;
        $menuActiveBefore: ${themeColors[key].menuActiveBefore} !default;
      `
    } as MultipleScopeVarsItem);
  });
  return result;
};
```

8. æ–°å»ºæ–‡ä»¶å¤¹ï¼Œèµ·å `vxe-table` ï¼Œç„¶åæ·»åŠ  `index.scss` å’Œ `index.ts` è¿™ä¸¤ä¸ªæ–‡ä»¶åˆ° `vxe-table` æ–‡ä»¶å¤¹é‡Œï¼Œå¦‚ä¸‹

- `vxe-table` æ–‡ä»¶å¤¹
- `index.scss` æ–‡ä»¶

```Css
@import "vxe-table/styles/variable.scss";
@import "vxe-table/styles/modules.scss";

i {
  border-color: initial;
}
```

- `index.ts` æ–‡ä»¶

```Ts
import "xe-utils";
import "./index.scss";
import XEUtils from "xe-utils";
import { App, unref } from "vue";
import { i18n } from "@/plugins/i18n";
import zh from "vxe-table/lib/locale/lang/zh-CN";
import en from "vxe-table/lib/locale/lang/en-US";

import {
  // æ ¸å¿ƒ
  VXETable,
  // è¡¨æ ¼åŠŸèƒ½
  Icon,
  Filter,
  Edit,
  Menu,
  Export,
  Keyboard,
  Validator,
  // å¯é€‰ç»„ä»¶
  Column,
  Colgroup,
  Grid,
  Tooltip,
  Toolbar,
  Pager,
  Form,
  FormItem,
  FormGather,
  Checkbox,
  CheckboxGroup,
  Radio,
  RadioGroup,
  RadioButton,
  Switch,
  Input,
  Select,
  Optgroup,
  Option,
  Textarea,
  Button,
  Modal,
  List,
  Pulldown,
  // è¡¨æ ¼
  Table
} from "vxe-table";

// å…¨å±€é»˜è®¤å‚æ•°
VXETable.setup({
  size: "medium",
  version: 0,
  zIndex: 1002,
  table: {
    // è‡ªåŠ¨ç›‘å¬çˆ¶å…ƒç´ çš„å˜åŒ–å»é‡æ–°è®¡ç®—è¡¨æ ¼
    autoResize: true,
    // é¼ æ ‡ç§»åˆ°è¡Œæ˜¯å¦è¦é«˜äº®æ˜¾ç¤º
    highlightHoverRow: true
  },
  input: {
    clearable: true
  },
  i18n: (key, args) => {
    return unref(i18n.global.locale) === "zh"
      ? XEUtils.toFormatString(XEUtils.get(zh, key), args)
      : XEUtils.toFormatString(XEUtils.get(en, key), args);
  },
  translate(key) {
    const NAMESPACED = ["el.", "buttons."];
    if (key && NAMESPACED.findIndex(v => key.includes(v)) !== -1) {
      return i18n.global.t.call(i18n.global.locale, key);
    }
    return key;
  }
});

export function useTable(app: App) {
  app
    .use(Icon)
    .use(Filter)
    .use(Edit)
    .use(Menu)
    .use(Export)
    .use(Keyboard)
    .use(Validator)
    // å¯é€‰ç»„ä»¶
    .use(Column)
    .use(Colgroup)
    .use(Grid)
    .use(Tooltip)
    .use(Toolbar)
    .use(Pager)
    .use(Form)
    .use(FormItem)
    .use(FormGather)
    .use(Checkbox)
    .use(CheckboxGroup)
    .use(Radio)
    .use(RadioGroup)
    .use(RadioButton)
    .use(Switch)
    .use(Input)
    .use(Select)
    .use(Optgroup)
    .use(Option)
    .use(Textarea)
    .use(Button)
    .use(Modal)
    .use(List)
    .use(Pulldown)
    // å®‰è£…è¡¨æ ¼
    .use(Table);
}
```

9.æœ€åä¸€æ­¥ï¼Œå°†ä¸‹é¢ä»£ç æ·»åŠ åˆ° `src/main.ts` æ–‡ä»¶ï¼Œç„¶åæ‚¨å°±å¯ä»¥æŒ‰ç…§ [vxetable](https://vxetable.cn/v4/#/table/start/quick) æ–‡æ¡£å»ä½¿ç”¨å•¦

```Ts
import { useTable } from "@/plugins/vxe-table";

// è®°å¾—è¦ç”¨ app.use æ³¨å†Œä¸‹å“¦
app.use(useTable)
```

:::tip å…·ä½“ä¿®æ”¹è®°å½•
[ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ç‰ˆå…·ä½“ä¿®æ”¹è®°å½•](https://github.com/pure-admin/vue-pure-admin/commit/3629a66535d3d47bec04be9f73becbd12d339fe0)  
[ç‚¹å‡»æŸ¥çœ‹éå›½é™…åŒ–ç²¾ç®€ç‰ˆå…·ä½“ä¿®æ”¹è®°å½•](https://github.com/pure-admin/pure-admin-thin/commit/27056e75609637508fa8818439c553082600b00f)  
[ç‚¹å‡»æŸ¥çœ‹å›½é™…åŒ–ç²¾ç®€ç‰ˆå…·ä½“ä¿®æ”¹è®°å½•](https://github.com/pure-admin/pure-admin-thin/commit/23d9cdaf81cb543b8659d7c2b5f969e8b53364b5)
:::

## å¹³å°åœ¨ `v3.9.5` ç‰ˆæœ¬å®Œå…¨ç§»é™¤äº† `lodash` å’Œå…¶ç›¸å…³åº“ï¼Œä¸ºä»€ä¹ˆç§»é™¤ï¼Ÿå¦‚ä½•è‡ªè¡Œé›†æˆï¼Ÿ

- ä¸ºä»€ä¹ˆç§»é™¤ï¼Ÿ

ç­”ï¼š[è¯·ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹åŸå› ](https://github.com/pure-admin/vue-pure-admin/issues/397#issue-1492326492)

- å¦‚ä½•è‡ªè¡Œé›†æˆï¼Ÿ

::: details

1. å®‰è£… `lodash`ã€`lodash-es`ã€`lodash-unified`

```
pnpm add lodash lodash-es lodash-unified
```

2. å®‰è£… `@types/lodash`ã€`@types/lodash-es`

```
pnpm add @types/lodash @types/lodash-es -D
```

3. å°† `lodash`ã€`lodash-es`ã€`lodash-unified` è¿™ä¸‰ä¸ªåº“åŠ å…¥åˆ° [include](https://github.com/pure-admin/vue-pure-admin/blob/main/build/optimize.ts#L7)

4. å¦‚æœéœ€è¦åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ `lodash cdn` ï¼Œå°†ä¸‹é¢ä»£ç åŠ å…¥åˆ° [modules](https://github.com/pure-admin/vue-pure-admin/blob/main/build/cdn.ts#L11)

```Ts
{
  name: "lodash",
  var: "lodash",
  // å¯å†™`å®Œæ•´è·¯å¾„`ï¼Œä¼šæ›¿æ¢`prodUrl`
  path: "https://cdn.bootcdn.net/ajax/libs/lodash.js/4.17.21/lodash.min.js"
}
```

5. æœ€åç›´æ¥ä½¿ç”¨ `lodash-unified` å³å¯ï¼Œå¦‚ä¸‹ä»£ç 

```Ts
import { cloneDeep } from "lodash-unified"
```

:::

## `github`è´¦å·åœ¨å“ªé‡Œçœ‹ï¼Ÿ

æ‰“å¼€ [github é¦–é¡µ](https://github.com/) ï¼Œç„¶åç‚¹å¼€å³ä¸Šè§’å¤´åƒï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯`github`è´¦å·ï¼Œå¦‚ä¸‹å›¾

![img](~@alias/img/guide/github.png)

## `mac` ç‰ˆæœ¬çš„å‘æ—¥è‘µæ— æ³•è¿œç¨‹æ“æ§ï¼Ÿå‘æ—¥è‘µæ€»æ˜¯é—ªé€€ã€æ‰“ä¸å¼€ï¼Ÿ

ç­”ï¼š`mac` ç‰ˆæœ¬çš„å‘æ—¥è‘µæ— æ³•è¿œç¨‹æ“æ§è¯·å‚è€ƒä¸‹å›¾è§£å†³

![img](~@alias/img/guide/xrk1.jpg)

ç­”ï¼šå‘æ—¥è‘µæ€»æ˜¯é—ªé€€ã€æ‰“ä¸å¼€è¯·å‚è€ƒä¸‹å›¾è§£å†³

![img](~@alias/img/guide/xrk2.jpg)

## åˆæ¬¡æ‹‰å–é¡¹ç›®ï¼Œä½¿ç”¨ `vscode` ç¼–è¾‘å™¨æ—¶ä»£ç å‡ºç° `eslint` æŠ¥é”™ï¼Œå¦‚ä¸‹å›¾

![img](~@alias/img/guide/eslint.jpg)

ç­”ï¼šè§£å†³åŠæ³•å¦‚ä¸‹å›¾ï¼Œæ¥è‡ª [issues/953](https://github.com/pure-admin/vue-pure-admin/issues/953#issuecomment-1976024071)

![img](~@alias/img/guide/eslint1.jpg)
